/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { isPlatformBrowser } from '@angular/common';
import { Component, ContentChild, ContentChildren, ElementRef, EventEmitter, Inject, Input, Output, PLATFORM_ID, QueryList, Renderer2, TemplateRef, ViewChild, ViewEncapsulation, } from '@angular/core';
import { BehaviorSubject, fromEvent, interval, merge, Subject } from 'rxjs';
import { bufferCount, debounceTime, switchMap, takeUntil, tap } from 'rxjs/operators';
import { NgxHmCarouselItemDirective } from './ngx-hm-carousel-item.directive';
import { resizeObservable } from './rxjs.observable.resize';
// if the pane is paned .25, switch to the next pane.
var /** @type {?} */ PANBOUNDARY = 0.15;
var NgxHmCarouselComponent = /** @class */ (function () {
    function NgxHmCarouselComponent(platformId, _renderer) {
        this.platformId = platformId;
        this._renderer = _renderer;
        this.aniTime = 400;
        this.align = 'center';
        this.infinite = false;
        this.mourseEnable = false;
        this.speed = 5000;
        this.delay = 8000;
        this.direction = 'right';
        this.scrollNum = 1;
        this.isDragMany = false;
        this.indexChanged = new EventEmitter();
        this.isFromAuto = true;
        this._currentIndex = 0;
        this._showNum = 1;
        this.isAutoNum = false;
        this._autoplay = false;
        this._porgressWidth = 0;
        this.alignDistance = 0;
        this.lastIndex = 0;
        this.elmWidth = 0;
        this.container_left = 0;
        this.mouseOnContainer = false;
        this.restart = new BehaviorSubject(null);
        this.stopEvent = new Subject();
    }
    Object.defineProperty(NgxHmCarouselComponent.prototype, "showNum", {
        get: /**
         * @return {?}
         */
        function () {
            return this._showNum;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value === 'auto') {
                this.isAutoNum = true;
            }
            else {
                this._showNum = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgxHmCarouselComponent.prototype, "currentIndex", {
        get: /**
         * @return {?}
         */
        function () {
            return this._currentIndex;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            // if now index if not equale to save index, do someting
            if (this.currentIndex !== value) {
                this._currentIndex = value;
                if (this.itemsElm) {
                    if (this.autoplay && !this.isFromAuto) {
                        this.stopEvent.next();
                        this.restart.next(null);
                    }
                    this.drawView(this.currentIndex);
                }
            }
            this.isFromAuto = false;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgxHmCarouselComponent.prototype, "autoplay", {
        get: /**
         * @return {?}
         */
        function () {
            return this._autoplay;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (isPlatformBrowser(this.platformId)) {
                if (this.itemsElm) {
                    this.progressWidth = 0;
                    if (value) {
                        this.doNextSub$ = this.doNext.subscribe();
                    }
                    else {
                        if (this.doNextSub$) {
                            this.doNextSub$.unsubscribe();
                        }
                    }
                }
            }
            this._autoplay = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgxHmCarouselComponent.prototype, "progressWidth", {
        get: /**
         * @return {?}
         */
        function () {
            return this._porgressWidth;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (this.progressElm !== undefined && this.autoplay) {
                this._porgressWidth = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        this.initVariable();
    };
    /**
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.setViewWidth(true);
        this.reSetVariable();
        this.hammer = this.bindHammer();
        this.drawView(this.currentIndex);
        this.bindClick();
        if (this.autoplay || this.infinite) {
            this.addInfiniteElm();
        }
        this.elmSub$ = resizeObservable(this.rootElm, function () { return _this.containerResize(); }).subscribe();
    };
    /**
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.addInfiniteElm = /**
     * @return {?}
     */
    function () {
        this.firstElm_clone = /** @type {?} */ (this.itemsElm[this.lastIndex].cloneNode(true));
        this.addStyle(this.firstElm_clone, {
            position: 'absolute',
            transform: 'translateX(-100%)'
        });
        this.LatestElm_clone = /** @type {?} */ (this.itemsElm[0].cloneNode(true));
        this.addStyle(this.LatestElm_clone, {
            position: 'absolute',
            right: 0,
            top: 0,
            transform: 'translateX(100%)'
        });
        this._renderer.insertBefore(this.containerElm, this.firstElm_clone, this.itemsElm[0]);
        this._renderer.appendChild(this.containerElm, this.LatestElm_clone);
    };
    /**
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.containerResize = /**
     * @return {?}
     */
    function () {
        this.reSetVariable();
        this.setViewWidth();
        // 因為不能滑了，所以要回到第一個，以確保全部都有顯示
        if (this.showNum >= this.itemsElm.length) {
            this.currentIndex = 0;
        }
        this.drawView(this.currentIndex, false);
    };
    /**
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.btnNext && this.btnPrev) {
            this.nextListener();
            this.prevListener();
        }
        this.hammer.destroy();
        if (this.autoplay) {
            this.doNextSub$.unsubscribe();
        }
        this.elmSub$.unsubscribe();
    };
    /**
     * @param {?} i
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.setIndex = /**
     * @param {?} i
     * @return {?}
     */
    function (i) {
        this.currentIndex = i;
    };
    /**
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.initVariable = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.rootElm = this.parentChild.nativeElement;
        this.containerElm = /** @type {?} */ (this.rootElm.children[0]);
        this.itemsElm = /** @type {?} */ (Array.from(this.containerElm.children));
        this.lastIndex = this.itemsElm.length - 1;
        if (this.dotElm) {
            this.dots = new Array(this.itemsElm.length);
        }
        var /** @type {?} */ startEvent = this.restart.asObservable();
        var /** @type {?} */ stopEvent = this.stopEvent.asObservable();
        if (this.mourseEnable) {
            startEvent = merge(startEvent, fromEvent(this.containerElm, 'mouseleave').pipe(tap(function () { return _this.mouseOnContainer = false; })));
            stopEvent = merge(stopEvent, fromEvent(this.containerElm, 'mouseover').pipe(tap(function () { return _this.mouseOnContainer = true; })));
        }
        this.doNext = startEvent.pipe(debounceTime(this.delay), switchMap(function () {
            return _this.runProgress(20).pipe(tap(function () {
                _this.isFromAuto = true;
                // console.log('next');
                if (_this.direction === 'left') {
                    _this.currentIndex -= _this.scrollNum;
                }
                else {
                    _this.currentIndex += _this.scrollNum;
                }
            }), takeUntil(stopEvent.pipe(tap(function () { return _this.progressWidth = 0; }))));
        }));
        if (this.autoplay) {
            this.doNextSub$ = this.doNext.subscribe();
        }
    };
    /**
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.reSetVariable = /**
     * @return {?}
     */
    function () {
        this.container_left = this.rootElm.getBoundingClientRect().left;
        if (this.showNum && this.showNum !== 1) {
            switch (this.align) {
                case 'center':
                    this.alignDistance = (this.rootElm.clientWidth - this.elmWidth) / 2;
                    break;
                case 'left':
                    this.alignDistance = 0;
                    break;
                case 'right':
                    this.alignDistance = this.rootElm.clientWidth - this.elmWidth;
                    break;
            }
        }
        // console.log(this.alignDistance);
    };
    /**
     * @param {?=} isInit
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.setViewWidth = /**
     * @param {?=} isInit
     * @return {?}
     */
    function (isInit) {
        var _this = this;
        if (this.isAutoNum) {
            this._showNum = this.getAutoNum();
        }
        this._renderer.addClass(this.containerElm, 'grab');
        // when init check view has scroll bar
        var /** @type {?} */ totalWidth = 0;
        if (isInit) {
            // remain one elm height
            this._renderer.addClass(this.containerElm, 'ngx-hm-carousel-display-npwrap');
        }
        this.elmWidth = (totalWidth + this.rootElm.clientWidth) / this._showNum;
        this._renderer.removeClass(this.containerElm, 'ngx-hm-carousel-display-npwrap');
        this._renderer.setStyle(this.containerElm, 'width', this.elmWidth * this.itemsElm.length + "px");
        this._renderer.setStyle(this.containerElm, 'position', 'relative');
        this.itemsElm.forEach(function (elm, index) {
            _this._renderer.setStyle(elm, 'width', _this.elmWidth + "px");
        });
        if (this.firstElm_clone) {
            this._renderer.setStyle(this.firstElm_clone, 'width', this.elmWidth + "px");
            this._renderer.setStyle(this.LatestElm_clone, 'width', this.elmWidth + "px");
        }
    };
    /**
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.bindHammer = /**
     * @return {?}
     */
    function () {
        var _this = this;
        var /** @type {?} */ hm = new Hammer(this.containerElm);
        hm.get('pan').set({ direction: Hammer.DIRECTION_HORIZONTAL });
        hm.on('panleft panright panend tap', function (e) {
            _this._renderer.removeClass(_this.containerElm, 'transition');
            _this._renderer.addClass(_this.containerElm, 'grabbing');
            if (_this.autoplay) {
                _this.stopEvent.next();
            }
            // console.log(e.type);
            switch (e.type) {
                case 'tap':
                    _this.callClick(e.center.x);
                    _this.callRestart();
                    _this._renderer.removeClass(_this.containerElm, 'grabbing');
                    break;
                case 'panleft':
                case 'panright':
                    // 顯示總數量小於總數量，停止滑動
                    if (_this.showNum >= _this.itemsElm.length) {
                        _this.hammer.stop(true);
                        return;
                    }
                    // console.log(e.deltaY);
                    // console.log(e.deltaY);
                    _this.prePanMove = false;
                    if (Math.abs(e.deltaY) > 50) {
                        return;
                    }
                    // Slow down at the first and last pane.
                    if (!(_this.autoplay || _this.infinite) && _this.outOfBound(e.type)) {
                        e.deltaX *= 0.2;
                    }
                    _this._renderer.setStyle(_this.containerElm, 'left', -_this.currentIndex * _this.elmWidth + _this.alignDistance + e.deltaX + "px");
                    if (!_this.isDragMany) {
                        if (Math.abs(e.deltaX) > _this.elmWidth * 0.5) {
                            if (e.deltaX > 0) {
                                _this.currentIndex -= _this.scrollNum;
                            }
                            else {
                                _this.currentIndex += _this.scrollNum;
                            }
                            _this._renderer.removeClass(_this.containerElm, 'grabbing');
                            _this.callRestart();
                            _this.hammer.stop(true);
                            // remember prv action, to avoid hammer stop, then click
                            // remember prv action, to avoid hammer stop, then click
                            _this.prePanMove = true;
                        }
                    }
                    break;
                case 'panend':
                    _this.callRestart();
                    _this._renderer.removeClass(_this.containerElm, 'grabbing');
                    if (Math.abs(e.deltaX) > _this.elmWidth * PANBOUNDARY) {
                        var /** @type {?} */ moveNum = _this.isDragMany ?
                            Math.ceil(Math.abs(e.deltaX) / _this.elmWidth) : _this.scrollNum;
                        var /** @type {?} */ prevIndex = _this.currentIndex - moveNum;
                        var /** @type {?} */ nextIndex = _this.currentIndex + moveNum;
                        // 如果不是無限循環，不能大於或小於
                        if (e.deltaX > 0) {
                            if (!(_this.autoplay || _this.infinite) && prevIndex < 0) {
                                prevIndex = 0;
                                _this.drawView(0);
                            }
                            _this.currentIndex = prevIndex;
                        }
                        else {
                            if (!(_this.autoplay || _this.infinite) && nextIndex > _this.lastIndex - _this._showNum + 1) {
                                nextIndex = _this.lastIndex - _this._showNum + 1;
                                _this.drawView(nextIndex);
                            }
                            _this.currentIndex = nextIndex;
                        }
                        break;
                    }
                    else {
                        if (!_this.isDragMany && _this.prePanMove) {
                            _this.callClick(e.center.x);
                        }
                    }
                    // console.log(this.currentIndex);
                    // console.log(this.currentIndex);
                    _this.drawView(_this.currentIndex);
                    _this.prePanMove = false;
                    break;
            }
        });
        return hm;
    };
    /**
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.bindClick = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.btnNext && this.btnPrev) {
            this.nextListener = this._renderer.listen(this.btnNext.nativeElement, 'click', function () {
                _this.currentIndex++;
            });
            this.prevListener = this._renderer.listen(this.btnPrev.nativeElement, 'click', function () {
                _this.currentIndex--;
            });
        }
    };
    /**
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.callRestart = /**
     * @return {?}
     */
    function () {
        if (this.autoplay && !this.mouseOnContainer) {
            this.restart.next(null);
        }
    };
    /**
     * @param {?} positionX
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.callClick = /**
     * @param {?} positionX
     * @return {?}
     */
    function (positionX) {
        // click position subtract the containerlef and alignDistance is the move distance
        var /** @type {?} */ toIndex = this.currentIndex + Math.floor((positionX - this.container_left - this.alignDistance) / this.elmWidth);
        var /** @type {?} */ elm = this.items.toArray()[toIndex];
        if (elm) {
            elm.clickEvent.emit(toIndex);
        }
    };
    /**
     * @param {?} index
     * @param {?=} isEmit
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.drawView = /**
     * @param {?} index
     * @param {?=} isEmit
     * @return {?}
     */
    function (index, isEmit) {
        if (isEmit === void 0) { isEmit = true; }
        var /** @type {?} */ lastIndex = this.lastIndex;
        if (this.autoplay || this.infinite) {
            if (index < 0) {
                this._currentIndex = lastIndex;
            }
            else if (index > lastIndex) {
                this._currentIndex = 0;
            }
        }
        else {
            this._currentIndex = Math.max(0, Math.min(index, this.lastIndex));
        }
        // 只有當大於1才要移動
        if (this.itemsElm.length > 1) {
            var /** @type {?} */ leftDistance = (index * this.elmWidth) - this.alignDistance;
            this._renderer.setStyle(this.containerElm, 'left', -leftDistance + "px");
            if (isEmit) {
                this._renderer.addClass(this.containerElm, 'transition');
                this.indexChanged.emit(this.currentIndex);
            }
            else {
                this._renderer.removeClass(this.containerElm, 'transition');
            }
            // 如果是循環的，當動畫結束偷偷的跳到當前的index、left去
            this.InfiniteHandler(index, lastIndex);
        }
        else {
            this._renderer.setStyle(this.containerElm, 'left', this.alignDistance + "px");
        }
    };
    /**
     * @param {?} index
     * @param {?} lastIndex
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.InfiniteHandler = /**
     * @param {?} index
     * @param {?} lastIndex
     * @return {?}
     */
    function (index, lastIndex) {
        var _this = this;
        if ((this.autoplay || this.infinite)) {
            setTimeout(function () {
                _this._renderer.removeClass(_this.containerElm, 'transition');
                // 如果是循環的，當動畫結束偷偷的跳到當前的index、left去
                var /** @type {?} */ distance = 0;
                if (index <= -1) {
                    distance = (lastIndex * _this.elmWidth) - _this.alignDistance;
                    _this._renderer.setStyle(_this.containerElm, 'left', -distance + "px");
                }
                else if (index > lastIndex) {
                    _this._renderer.setStyle(_this.containerElm, 'left', "0px");
                }
            }, this.aniTime);
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.outOfBound = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        switch (type) {
            case 'panleft':
                return this.currentIndex >= this.lastIndex - this._showNum + 1;
            case 'panright':
                return this.currentIndex <= 0;
        }
    };
    /**
     * @param {?} betweenTime
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.runProgress = /**
     * @param {?} betweenTime
     * @return {?}
     */
    function (betweenTime) {
        var _this = this;
        var /** @type {?} */ howTimes = this.speed / betweenTime;
        var /** @type {?} */ everyIncrease = 100 / this.speed * betweenTime;
        // console.log('progress');
        return interval(betweenTime).pipe(tap(function (t) {
            _this.progressWidth = (t % howTimes) * everyIncrease;
        }), bufferCount(Math.round(this.speed / betweenTime), 0));
    };
    /**
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.getAutoNum = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ initNum = 3;
        // 610
        var /** @type {?} */ width = this.rootElm.clientWidth;
        if (width > 300) {
            return Math.floor(initNum + (width / 200));
        }
        return initNum;
    };
    /**
     * @param {?} elm
     * @param {?} style
     * @return {?}
     */
    NgxHmCarouselComponent.prototype.addStyle = /**
     * @param {?} elm
     * @param {?} style
     * @return {?}
     */
    function (elm, style) {
        var _this = this;
        if (style) {
            Object.keys(style).forEach(function (key) {
                var /** @type {?} */ value = style[key];
                _this._renderer.setStyle(elm, key, value);
            });
        }
    };
    NgxHmCarouselComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ngx-hm-carousel',
                    template: "<div #parentChild class=\"carousel\">\n  <ng-content select=\"[ngx-hm-carousel-container]\"></ng-content>\n  <!-- left -->\n  <div #prev *ngIf=\"contentPrev\"\n    class=\"direction left\">\n    <ng-container *ngTemplateOutlet=\"contentPrev\"></ng-container>\n  </div>\n  <!--  right -->\n  <div #next *ngIf=\"contentNext\"\n    class=\"direction right\">\n    <ng-container *ngTemplateOutlet=\"contentNext\"></ng-container>\n  </div>\n  <!-- indicators -->\n  <ul class=\"indicators\" *ngIf=\"dotElm\">\n    <li\n      *ngFor=\"let dot of dots; let i = index;\"\n      (click)=\"setIndex(i)\">\n      <ng-container\n        *ngTemplateOutlet=\"dotElm, context: {\n          $implicit: {\n            index : i,\n            currentIndex : currentIndex\n          }\n        }\">\n      </ng-container>\n    </li>\n  </ul>\n  <!-- progress -->\n  <div *ngIf=\"progressElm && autoplay\">\n    <ng-container\n      *ngTemplateOutlet=\"progressElm, context: {\n        $implicit: {\n          progress:progressWidth\n        }\n      }\">\n    </ng-container>\n  </div>\n</div>\n",
                    styles: [":host{display:block;height:100%}.ngx-hm-carousel-display-npwrap{display:flex!important;flex-wrap:nowrap!important;flex-direction:row!important;overflow:hidden!important}.carousel{overflow:hidden;position:relative;width:100%;height:100%}.carousel ul.indicators{list-style:none;bottom:1rem;left:0;margin:0;padding:0;position:absolute;text-align:center;width:100%}.carousel ul.indicators li{cursor:pointer;display:inline-block;position:relative;padding:.5rem}.carousel .direction{position:absolute;height:100%;display:flex;align-items:center;justify-content:center;top:0}.carousel .direction.left{left:0}.carousel .direction.right{position:absolute;right:0}.transition{transition:all .4s ease-in-out}.grab{cursor:-webkit-grab;cursor:grab}.grabbing{cursor:-webkit-grabbing;cursor:grabbing}.pointer{cursor:pointer}"],
                    encapsulation: ViewEncapsulation.None
                },] },
    ];
    /** @nocollapse */
    NgxHmCarouselComponent.ctorParameters = function () { return [
        { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] },] },
        { type: Renderer2, },
    ]; };
    NgxHmCarouselComponent.propDecorators = {
        "parentChild": [{ type: ViewChild, args: ['parentChild',] },],
        "btnPrev": [{ type: ViewChild, args: ['prev',] },],
        "btnNext": [{ type: ViewChild, args: ['next',] },],
        "items": [{ type: ContentChildren, args: [NgxHmCarouselItemDirective,] },],
        "contentPrev": [{ type: ContentChild, args: ['carouselPrev',] },],
        "contentNext": [{ type: ContentChild, args: ['carouselNext',] },],
        "dotElm": [{ type: ContentChild, args: ['carouselDot',] },],
        "progressElm": [{ type: ContentChild, args: ['carouselProgress',] },],
        "aniTime": [{ type: Input, args: ['aniTime',] },],
        "align": [{ type: Input, args: ['align',] },],
        "infinite": [{ type: Input, args: ['infinite',] },],
        "mourseEnable": [{ type: Input, args: ['mourse-enable',] },],
        "speed": [{ type: Input, args: ['autoplay-speed',] },],
        "delay": [{ type: Input, args: ['between-delay',] },],
        "direction": [{ type: Input, args: ['autoplay-direction',] },],
        "showNum": [{ type: Input, args: ['show-num',] },],
        "scrollNum": [{ type: Input, args: ['scroll-num',] },],
        "isDragMany": [{ type: Input, args: ['drag-many',] },],
        "currentIndex": [{ type: Input, args: ['current-index',] },],
        "autoplay": [{ type: Input, args: ['autoplay',] },],
        "indexChanged": [{ type: Output, args: ['index-change',] },],
    };
    return NgxHmCarouselComponent;
}());
export { NgxHmCarouselComponent };
function NgxHmCarouselComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    NgxHmCarouselComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    NgxHmCarouselComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    NgxHmCarouselComponent.propDecorators;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.parentChild;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.btnPrev;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.btnNext;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.items;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.contentPrev;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.contentNext;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.dotElm;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.progressElm;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.aniTime;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.align;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.infinite;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.mourseEnable;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.speed;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.delay;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.direction;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.scrollNum;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.isDragMany;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.indexChanged;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.isFromAuto;
    /** @type {?} */
    NgxHmCarouselComponent.prototype._currentIndex;
    /** @type {?} */
    NgxHmCarouselComponent.prototype._showNum;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.isAutoNum;
    /** @type {?} */
    NgxHmCarouselComponent.prototype._autoplay;
    /** @type {?} */
    NgxHmCarouselComponent.prototype._porgressWidth;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.rootElm;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.alignDistance;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.containerElm;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.itemsElm;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.lastIndex;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.hammer;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.elmWidth;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.container_left;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.mouseOnContainer;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.restart;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.stopEvent;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.doNext;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.doNextSub$;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.elmSub$;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.firstElm_clone;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.LatestElm_clone;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.prePanMove;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.dots;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.nextListener;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.prevListener;
    /** @type {?} */
    NgxHmCarouselComponent.prototype.platformId;
    /** @type {?} */
    NgxHmCarouselComponent.prototype._renderer;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWhtLWNhcm91c2VsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1obS1jYXJvdXNlbC8iLCJzb3VyY2VzIjpbImxpYi9uZ3gtaG0tY2Fyb3VzZWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNwRCxPQUFPLEVBR0wsU0FBUyxFQUNULFlBQVksRUFDWixlQUFlLEVBQ2YsVUFBVSxFQUNWLFlBQVksRUFDWixNQUFNLEVBQ04sS0FBSyxFQUVMLE1BQU0sRUFDTixXQUFXLEVBQ1gsU0FBUyxFQUNULFNBQVMsRUFDVCxXQUFXLEVBQ1gsU0FBUyxFQUNULGlCQUFpQixHQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsZUFBZSxFQUFjLFNBQVMsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBZ0IsTUFBTSxNQUFNLENBQUM7QUFDdEcsT0FBTyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUV0RixPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUM5RSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQzs7QUFHNUQscUJBQU0sV0FBVyxHQUFHLElBQUksQ0FBQzs7SUEySnZCLGdDQUMrQixZQUNyQjtRQURxQixlQUFVLEdBQVYsVUFBVTtRQUMvQixjQUFTLEdBQVQsU0FBUzt1QkFyR1MsR0FBRztxQkFDc0IsUUFBUTt3QkFDL0IsS0FBSzs0QkFDSSxLQUFLO3FCQUNYLElBQUk7cUJBQ0wsSUFBSTt5QkFDdUIsT0FBTzt5QkFZakMsQ0FBQzswQkFDRCxLQUFLOzRCQXVDQyxJQUFJLFlBQVksRUFBRTswQkFVcEMsSUFBSTs2QkFDRCxDQUFDO3dCQUNOLENBQUM7eUJBQ0EsS0FB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Z0JBeEtyQixTQUFTOzs7Z0NBMkRSLFNBQVMsU0FBQyxhQUFhOzRCQUN2QixTQUFTLFNBQUMsTUFBTTs0QkFDaEIsU0FBUyxTQUFDLE1BQU07MEJBQ2hCLGVBQWUsU0FBQywwQkFBMEI7Z0NBQzFDLFlBQVksU0FBQyxjQUFjO2dDQUMzQixZQUFZLFNBQUMsY0FBYzsyQkFDM0IsWUFBWSxTQUFDLGFBQWE7Z0NBQzFCLFlBQVksU0FBQyxrQkFBa0I7NEJBRS9CLEtBQUssU0FBQyxTQUFTOzBCQUNmLEtBQUssU0FBQyxPQUFPOzZCQUNiLEtBQUssU0FBQyxVQUFVO2lDQUNoQixLQUFLLFNBQUMsZUFBZTswQkFDckIsS0FBSyxTQUFDLGdCQUFnQjswQkFDdEIsS0FBSyxTQUFDLGVBQWU7OEJBQ3JCLEtBQUssU0FBQyxvQkFBb0I7NEJBQzFCLEtBQUssU0FBQyxVQUFVOzhCQVdoQixLQUFLLFNBQUMsWUFBWTsrQkFDbEIsS0FBSyxTQUFDLFdBQVc7aUNBQ2pCLEtBQUssU0FBQyxlQUFlOzZCQW9CckIsS0FBSyxTQUFDLFVBQVU7aUNBa0JoQixNQUFNLFNBQUMsY0FBYzs7aUNBN0l4Qjs7U0F5RWEsc0JBQXNCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge1xyXG4gIEFmdGVyQ29udGVudEluaXQsXHJcbiAgQWZ0ZXJWaWV3SW5pdCxcclxuICBDb21wb25lbnQsXHJcbiAgQ29udGVudENoaWxkLFxyXG4gIENvbnRlbnRDaGlsZHJlbixcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBJbmplY3QsXHJcbiAgSW5wdXQsXHJcbiAgT25EZXN0cm95LFxyXG4gIE91dHB1dCxcclxuICBQTEFURk9STV9JRCxcclxuICBRdWVyeUxpc3QsXHJcbiAgUmVuZGVyZXIyLFxyXG4gIFRlbXBsYXRlUmVmLFxyXG4gIFZpZXdDaGlsZCxcclxuICBWaWV3RW5jYXBzdWxhdGlvbixcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlLCBmcm9tRXZlbnQsIGludGVydmFsLCBtZXJnZSwgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IGJ1ZmZlckNvdW50LCBkZWJvdW5jZVRpbWUsIHN3aXRjaE1hcCwgdGFrZVVudGlsLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcblxyXG5pbXBvcnQgeyBOZ3hIbUNhcm91c2VsSXRlbURpcmVjdGl2ZSB9IGZyb20gJy4vbmd4LWhtLWNhcm91c2VsLWl0ZW0uZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgcmVzaXplT2JzZXJ2YWJsZSB9IGZyb20gJy4vcnhqcy5vYnNlcnZhYmxlLnJlc2l6ZSc7XHJcblxyXG4vLyBpZiB0aGUgcGFuZSBpcyBwYW5lZCAuMjUsIHN3aXRjaCB0byB0aGUgbmV4dCBwYW5lLlxyXG5jb25zdCBQQU5CT1VOREFSWSA9IDAuMTU7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ25neC1obS1jYXJvdXNlbCcsXHJcbiAgdGVtcGxhdGU6IGA8ZGl2ICNwYXJlbnRDaGlsZCBjbGFzcz1cImNhcm91c2VsXCI+XHJcbiAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW25neC1obS1jYXJvdXNlbC1jb250YWluZXJdXCI+PC9uZy1jb250ZW50PlxyXG4gIDwhLS0gbGVmdCAtLT5cclxuICA8ZGl2ICNwcmV2ICpuZ0lmPVwiY29udGVudFByZXZcIlxyXG4gICAgY2xhc3M9XCJkaXJlY3Rpb24gbGVmdFwiPlxyXG4gICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImNvbnRlbnRQcmV2XCI+PC9uZy1jb250YWluZXI+XHJcbiAgPC9kaXY+XHJcbiAgPCEtLSAgcmlnaHQgLS0+XHJcbiAgPGRpdiAjbmV4dCAqbmdJZj1cImNvbnRlbnROZXh0XCJcclxuICAgIGNsYXNzPVwiZGlyZWN0aW9uIHJpZ2h0XCI+XHJcbiAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiY29udGVudE5leHRcIj48L25nLWNvbnRhaW5lcj5cclxuICA8L2Rpdj5cclxuICA8IS0tIGluZGljYXRvcnMgLS0+XHJcbiAgPHVsIGNsYXNzPVwiaW5kaWNhdG9yc1wiICpuZ0lmPVwiZG90RWxtXCI+XHJcbiAgICA8bGlcclxuICAgICAgKm5nRm9yPVwibGV0IGRvdCBvZiBkb3RzOyBsZXQgaSA9IGluZGV4O1wiXHJcbiAgICAgIChjbGljayk9XCJzZXRJbmRleChpKVwiPlxyXG4gICAgICA8bmctY29udGFpbmVyXHJcbiAgICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJkb3RFbG0sIGNvbnRleHQ6IHtcclxuICAgICAgICAgICRpbXBsaWNpdDoge1xyXG4gICAgICAgICAgICBpbmRleCA6IGksXHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmRleCA6IGN1cnJlbnRJbmRleFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cIj5cclxuICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICA8L2xpPlxyXG4gIDwvdWw+XHJcbiAgPCEtLSBwcm9ncmVzcyAtLT5cclxuICA8ZGl2ICpuZ0lmPVwicHJvZ3Jlc3NFbG0gJiYgYXV0b3BsYXlcIj5cclxuICAgIDxuZy1jb250YWluZXJcclxuICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJwcm9ncmVzc0VsbSwgY29udGV4dDoge1xyXG4gICAgICAgICRpbXBsaWNpdDoge1xyXG4gICAgICAgICAgcHJvZ3Jlc3M6cHJvZ3Jlc3NXaWR0aFxyXG4gICAgICAgIH1cclxuICAgICAgfVwiPlxyXG4gICAgPC9uZy1jb250YWluZXI+XHJcbiAgPC9kaXY+XHJcbjwvZGl2PlxyXG5gLFxyXG4gIHN0eWxlczogW2A6aG9zdHtkaXNwbGF5OmJsb2NrO2hlaWdodDoxMDAlfS5uZ3gtaG0tY2Fyb3VzZWwtZGlzcGxheS1ucHdyYXB7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtmbGV4LXdyYXA6bm93cmFwIWltcG9ydGFudDtmbGV4LWRpcmVjdGlvbjpyb3chaW1wb3J0YW50O292ZXJmbG93OmhpZGRlbiFpbXBvcnRhbnR9LmNhcm91c2Vse292ZXJmbG93OmhpZGRlbjtwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfS5jYXJvdXNlbCB1bC5pbmRpY2F0b3Jze2xpc3Qtc3R5bGU6bm9uZTtib3R0b206MXJlbTtsZWZ0OjA7bWFyZ2luOjA7cGFkZGluZzowO3Bvc2l0aW9uOmFic29sdXRlO3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjEwMCV9LmNhcm91c2VsIHVsLmluZGljYXRvcnMgbGl7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzouNXJlbX0uY2Fyb3VzZWwgLmRpcmVjdGlvbntwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MTAwJTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7dG9wOjB9LmNhcm91c2VsIC5kaXJlY3Rpb24ubGVmdHtsZWZ0OjB9LmNhcm91c2VsIC5kaXJlY3Rpb24ucmlnaHR7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MH0udHJhbnNpdGlvbnt0cmFuc2l0aW9uOmFsbCAuNHMgZWFzZS1pbi1vdXR9LmdyYWJ7Y3Vyc29yOi13ZWJraXQtZ3JhYjtjdXJzb3I6Z3JhYn0uZ3JhYmJpbmd7Y3Vyc29yOi13ZWJraXQtZ3JhYmJpbmc7Y3Vyc29yOmdyYWJiaW5nfS5wb2ludGVye2N1cnNvcjpwb2ludGVyfWBdLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIE5neEhtQ2Fyb3VzZWxDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBBZnRlckNvbnRlbnRJbml0LCBPbkRlc3Ryb3kge1xyXG4gIEBWaWV3Q2hpbGQoJ3BhcmVudENoaWxkJykgcGFyZW50Q2hpbGQ7XHJcbiAgQFZpZXdDaGlsZCgncHJldicpIHByaXZhdGUgYnRuUHJldjogRWxlbWVudFJlZjtcclxuICBAVmlld0NoaWxkKCduZXh0JykgcHJpdmF0ZSBidG5OZXh0OiBFbGVtZW50UmVmO1xyXG4gIEBDb250ZW50Q2hpbGRyZW4oTmd4SG1DYXJvdXNlbEl0ZW1EaXJlY3RpdmUpIGl0ZW1zOiBRdWVyeUxpc3Q8Tmd4SG1DYXJvdXNlbEl0ZW1EaXJlY3RpdmU+O1xyXG4gIEBDb250ZW50Q2hpbGQoJ2Nhcm91c2VsUHJldicpIGNvbnRlbnRQcmV2OiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBDb250ZW50Q2hpbGQoJ2Nhcm91c2VsTmV4dCcpIGNvbnRlbnROZXh0OiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBDb250ZW50Q2hpbGQoJ2Nhcm91c2VsRG90JykgZG90RWxtOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBDb250ZW50Q2hpbGQoJ2Nhcm91c2VsUHJvZ3Jlc3MnKSBwcm9ncmVzc0VsbTogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgQElucHV0KCdhbmlUaW1lJykgYW5pVGltZSA9IDQwMDtcclxuICBASW5wdXQoJ2FsaWduJykgYWxpZ246ICdsZWZ0JyB8ICdjZW50ZXInIHwgJ3JpZ2h0JyA9ICdjZW50ZXInO1xyXG4gIEBJbnB1dCgnaW5maW5pdGUnKSBpbmZpbml0ZSA9IGZhbHNlO1xyXG4gIEBJbnB1dCgnbW91cnNlLWVuYWJsZScpIG1vdXJzZUVuYWJsZSA9IGZhbHNlO1xyXG4gIEBJbnB1dCgnYXV0b3BsYXktc3BlZWQnKSBzcGVlZCA9IDUwMDA7XHJcbiAgQElucHV0KCdiZXR3ZWVuLWRlbGF5JykgZGVsYXkgPSA4MDAwO1xyXG4gIEBJbnB1dCgnYXV0b3BsYXktZGlyZWN0aW9uJykgZGlyZWN0aW9uOiAnbGVmdCcgfCAncmlnaHQnID0gJ3JpZ2h0JztcclxuICBASW5wdXQoJ3Nob3ctbnVtJylcclxuICBzZXQgc2hvd051bSh2YWx1ZTogbnVtYmVyIHwgJ2F1dG8nKSB7XHJcbiAgICBpZiAodmFsdWUgPT09ICdhdXRvJykge1xyXG4gICAgICB0aGlzLmlzQXV0b051bSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zaG93TnVtID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBzaG93TnVtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Nob3dOdW07XHJcbiAgfVxyXG4gIEBJbnB1dCgnc2Nyb2xsLW51bScpIHNjcm9sbE51bSA9IDE7XHJcbiAgQElucHV0KCdkcmFnLW1hbnknKSBpc0RyYWdNYW55ID0gZmFsc2U7XHJcbiAgQElucHV0KCdjdXJyZW50LWluZGV4JylcclxuICBzZXQgY3VycmVudEluZGV4KHZhbHVlKSB7XHJcbiAgICAvLyBpZiBub3cgaW5kZXggaWYgbm90IGVxdWFsZSB0byBzYXZlIGluZGV4LCBkbyBzb21ldGluZ1xyXG4gICAgaWYgKHRoaXMuY3VycmVudEluZGV4ICE9PSB2YWx1ZSkge1xyXG4gICAgICB0aGlzLl9jdXJyZW50SW5kZXggPSB2YWx1ZTtcclxuXHJcbiAgICAgIGlmICh0aGlzLml0ZW1zRWxtKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b3BsYXkgJiYgIXRoaXMuaXNGcm9tQXV0bykge1xyXG4gICAgICAgICAgdGhpcy5zdG9wRXZlbnQubmV4dCgpO1xyXG4gICAgICAgICAgdGhpcy5yZXN0YXJ0Lm5leHQobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZHJhd1ZpZXcodGhpcy5jdXJyZW50SW5kZXgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmlzRnJvbUF1dG8gPSBmYWxzZTtcclxuICB9XHJcbiAgZ2V0IGN1cnJlbnRJbmRleCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jdXJyZW50SW5kZXg7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoJ2F1dG9wbGF5JylcclxuICBzZXQgYXV0b3BsYXkodmFsdWUpIHtcclxuICAgIGlmIChpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB7XHJcbiAgICAgIGlmICh0aGlzLml0ZW1zRWxtKSB7XHJcbiAgICAgICAgdGhpcy5wcm9ncmVzc1dpZHRoID0gMDtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgIHRoaXMuZG9OZXh0U3ViJCA9IHRoaXMuZG9OZXh0LnN1YnNjcmliZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5kb05leHRTdWIkKSB7IHRoaXMuZG9OZXh0U3ViJC51bnN1YnNjcmliZSgpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLl9hdXRvcGxheSA9IHZhbHVlO1xyXG4gIH1cclxuICBnZXQgYXV0b3BsYXkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXV0b3BsYXk7XHJcbiAgfVxyXG5cclxuICBAT3V0cHV0KCdpbmRleC1jaGFuZ2UnKSBpbmRleENoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgc2V0IHByb2dyZXNzV2lkdGgodmFsdWUpIHtcclxuICAgIGlmICh0aGlzLnByb2dyZXNzRWxtICE9PSB1bmRlZmluZWQgJiYgdGhpcy5hdXRvcGxheSkge1xyXG4gICAgICB0aGlzLl9wb3JncmVzc1dpZHRoID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBwcm9ncmVzc1dpZHRoKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3BvcmdyZXNzV2lkdGg7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzRnJvbUF1dG8gPSB0cnVlO1xyXG4gIHByaXZhdGUgX2N1cnJlbnRJbmRleCA9IDA7XHJcbiAgcHJpdmF0ZSBfc2hvd051bSA9IDE7XHJcbiAgcHJpdmF0ZSBpc0F1dG9OdW0gPSBmYWxzZTtcclxuICBwcml2YXRlIF9hdXRvcGxheSA9IGZhbHNlO1xyXG4gIHByaXZhdGUgX3BvcmdyZXNzV2lkdGggPSAwO1xyXG5cclxuICBwcml2YXRlIHJvb3RFbG06IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgYWxpZ25EaXN0YW5jZSA9IDA7XHJcbiAgcHJpdmF0ZSBjb250YWluZXJFbG06IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgaXRlbXNFbG06IEFycmF5PEhUTUxFbGVtZW50PjtcclxuICBwcml2YXRlIGxhc3RJbmRleCA9IDA7XHJcbiAgcHJpdmF0ZSBoYW1tZXI6IEhhbW1lck1hbmFnZXI7XHJcbiAgcHJpdmF0ZSBlbG1XaWR0aCA9IDA7XHJcbiAgcHJpdmF0ZSBjb250YWluZXJfbGVmdCA9IDA7XHJcblxyXG4gIHByaXZhdGUgbW91c2VPbkNvbnRhaW5lciA9IGZhbHNlO1xyXG4gIHByaXZhdGUgcmVzdGFydCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8YW55PihudWxsKTtcclxuICBwcml2YXRlIHN0b3BFdmVudCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuXHJcbiAgcHJpdmF0ZSBkb05leHQ6IE9ic2VydmFibGU8YW55PjtcclxuICBwcml2YXRlIGRvTmV4dFN1YiQ6IFN1YnNjcmlwdGlvbjtcclxuICBwcml2YXRlIGVsbVN1YiQ6IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgcHJpdmF0ZSBmaXJzdEVsbV9jbG9uZTtcclxuICBwcml2YXRlIExhdGVzdEVsbV9jbG9uZTtcclxuICBwcml2YXRlIHByZVBhbk1vdmU6IGJvb2xlYW47XHJcbiAgcHVibGljIGRvdHM6IEFycmF5PG51bWJlcj47XHJcbiAgcHJpdmF0ZSBuZXh0TGlzdGVuZXI6ICgpID0+IHZvaWQ7XHJcbiAgcHJpdmF0ZSBwcmV2TGlzdGVuZXI6ICgpID0+IHZvaWQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSBwbGF0Zm9ybUlkOiBPYmplY3QsXHJcbiAgICBwcml2YXRlIF9yZW5kZXJlcjogUmVuZGVyZXIyKSB7IH1cclxuXHJcbiAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5pbml0VmFyaWFibGUoKTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIHRoaXMuc2V0Vmlld1dpZHRoKHRydWUpO1xyXG4gICAgdGhpcy5yZVNldFZhcmlhYmxlKCk7XHJcbiAgICB0aGlzLmhhbW1lciA9IHRoaXMuYmluZEhhbW1lcigpO1xyXG4gICAgdGhpcy5kcmF3Vmlldyh0aGlzLmN1cnJlbnRJbmRleCk7XHJcbiAgICB0aGlzLmJpbmRDbGljaygpO1xyXG5cclxuICAgIGlmICh0aGlzLmF1dG9wbGF5IHx8IHRoaXMuaW5maW5pdGUpIHtcclxuICAgICAgdGhpcy5hZGRJbmZpbml0ZUVsbSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZWxtU3ViJCA9IHJlc2l6ZU9ic2VydmFibGUodGhpcy5yb290RWxtLCAoKSA9PiB0aGlzLmNvbnRhaW5lclJlc2l6ZSgpKS5zdWJzY3JpYmUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkSW5maW5pdGVFbG0oKSB7XHJcbiAgICB0aGlzLmZpcnN0RWxtX2Nsb25lID0gdGhpcy5pdGVtc0VsbVt0aGlzLmxhc3RJbmRleF0uY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgdGhpcy5hZGRTdHlsZSh0aGlzLmZpcnN0RWxtX2Nsb25lLCB7XHJcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC0xMDAlKSdcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICB0aGlzLkxhdGVzdEVsbV9jbG9uZSA9IHRoaXMuaXRlbXNFbG1bMF0uY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgdGhpcy5hZGRTdHlsZSh0aGlzLkxhdGVzdEVsbV9jbG9uZSwge1xyXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgIHRvcDogMCxcclxuICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgxMDAlKSdcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3JlbmRlcmVyLmluc2VydEJlZm9yZSh0aGlzLmNvbnRhaW5lckVsbSwgdGhpcy5maXJzdEVsbV9jbG9uZSwgdGhpcy5pdGVtc0VsbVswXSk7XHJcbiAgICB0aGlzLl9yZW5kZXJlci5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lckVsbSwgdGhpcy5MYXRlc3RFbG1fY2xvbmUpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb250YWluZXJSZXNpemUoKSB7XHJcbiAgICB0aGlzLnJlU2V0VmFyaWFibGUoKTtcclxuICAgIHRoaXMuc2V0Vmlld1dpZHRoKCk7XHJcblxyXG4gICAgLy8g5Zug54K65LiN6IO95ruR5LqG77yM5omA5Lul6KaB5Zue5Yiw56ys5LiA5YCL77yM5Lul56K65L+d5YWo6YOo6YO95pyJ6aGv56S6XHJcbiAgICBpZiAodGhpcy5zaG93TnVtID49IHRoaXMuaXRlbXNFbG0ubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gMDtcclxuICAgIH1cclxuICAgIHRoaXMuZHJhd1ZpZXcodGhpcy5jdXJyZW50SW5kZXgsIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gICAgaWYgKHRoaXMuYnRuTmV4dCAmJiB0aGlzLmJ0blByZXYpIHtcclxuICAgICAgdGhpcy5uZXh0TGlzdGVuZXIoKTtcclxuICAgICAgdGhpcy5wcmV2TGlzdGVuZXIoKTtcclxuICAgIH1cclxuICAgIHRoaXMuaGFtbWVyLmRlc3Ryb3koKTtcclxuICAgIGlmICh0aGlzLmF1dG9wbGF5KSB7XHJcbiAgICAgIHRoaXMuZG9OZXh0U3ViJC51bnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZWxtU3ViJC51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5kZXgoaSkge1xyXG4gICAgdGhpcy5jdXJyZW50SW5kZXggPSBpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0VmFyaWFibGUoKSB7XHJcbiAgICB0aGlzLnJvb3RFbG0gPSB0aGlzLnBhcmVudENoaWxkLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICB0aGlzLmNvbnRhaW5lckVsbSA9IHRoaXMucm9vdEVsbS5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudDtcclxuICAgIHRoaXMuaXRlbXNFbG0gPSBBcnJheS5mcm9tKHRoaXMuY29udGFpbmVyRWxtLmNoaWxkcmVuKSBhcyBIVE1MRWxlbWVudFtdO1xyXG4gICAgdGhpcy5sYXN0SW5kZXggPSB0aGlzLml0ZW1zRWxtLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgaWYgKHRoaXMuZG90RWxtKSB7XHJcbiAgICAgIHRoaXMuZG90cyA9IG5ldyBBcnJheSh0aGlzLml0ZW1zRWxtLmxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHN0YXJ0RXZlbnQgPSB0aGlzLnJlc3RhcnQuYXNPYnNlcnZhYmxlKCk7XHJcbiAgICBsZXQgc3RvcEV2ZW50ID0gdGhpcy5zdG9wRXZlbnQuYXNPYnNlcnZhYmxlKCk7XHJcbiAgICBpZiAodGhpcy5tb3Vyc2VFbmFibGUpIHtcclxuICAgICAgc3RhcnRFdmVudCA9IG1lcmdlKFxyXG4gICAgICAgIHN0YXJ0RXZlbnQsXHJcbiAgICAgICAgZnJvbUV2ZW50KHRoaXMuY29udGFpbmVyRWxtLCAnbW91c2VsZWF2ZScpLnBpcGUoXHJcbiAgICAgICAgICB0YXAoKCkgPT4gdGhpcy5tb3VzZU9uQ29udGFpbmVyID0gZmFsc2UpXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBzdG9wRXZlbnQgPSBtZXJnZShcclxuICAgICAgICBzdG9wRXZlbnQsXHJcbiAgICAgICAgZnJvbUV2ZW50KHRoaXMuY29udGFpbmVyRWxtLCAnbW91c2VvdmVyJykucGlwZShcclxuICAgICAgICAgIHRhcCgoKSA9PiB0aGlzLm1vdXNlT25Db250YWluZXIgPSB0cnVlKVxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmRvTmV4dCA9IHN0YXJ0RXZlbnQucGlwZShcclxuICAgICAgZGVib3VuY2VUaW1lKHRoaXMuZGVsYXkpLFxyXG4gICAgICBzd2l0Y2hNYXAoKCkgPT5cclxuICAgICAgICB0aGlzLnJ1blByb2dyZXNzKDIwKS5waXBlKFxyXG4gICAgICAgICAgdGFwKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pc0Zyb21BdXRvID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ25leHQnKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCAtPSB0aGlzLnNjcm9sbE51bTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCArPSB0aGlzLnNjcm9sbE51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICB0YWtlVW50aWwoc3RvcEV2ZW50LnBpcGUodGFwKCgpID0+IHRoaXMucHJvZ3Jlc3NXaWR0aCA9IDApKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIClcclxuICAgICAgKSk7XHJcblxyXG4gICAgaWYgKHRoaXMuYXV0b3BsYXkpIHtcclxuICAgICAgdGhpcy5kb05leHRTdWIkID0gdGhpcy5kb05leHQuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlU2V0VmFyaWFibGUoKSB7XHJcbiAgICB0aGlzLmNvbnRhaW5lcl9sZWZ0ID0gdGhpcy5yb290RWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICBpZiAodGhpcy5zaG93TnVtICYmIHRoaXMuc2hvd051bSAhPT0gMSkge1xyXG4gICAgICBzd2l0Y2ggKHRoaXMuYWxpZ24pIHtcclxuICAgICAgICBjYXNlICdjZW50ZXInOlxyXG4gICAgICAgICAgdGhpcy5hbGlnbkRpc3RhbmNlID0gKHRoaXMucm9vdEVsbS5jbGllbnRXaWR0aCAtIHRoaXMuZWxtV2lkdGgpIC8gMjtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgICAgdGhpcy5hbGlnbkRpc3RhbmNlID0gMDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICAgIHRoaXMuYWxpZ25EaXN0YW5jZSA9IHRoaXMucm9vdEVsbS5jbGllbnRXaWR0aCAtIHRoaXMuZWxtV2lkdGg7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5hbGlnbkRpc3RhbmNlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0Vmlld1dpZHRoKGlzSW5pdD86IGJvb2xlYW4pIHtcclxuICAgIGlmICh0aGlzLmlzQXV0b051bSkge1xyXG4gICAgICB0aGlzLl9zaG93TnVtID0gdGhpcy5nZXRBdXRvTnVtKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmNvbnRhaW5lckVsbSwgJ2dyYWInKTtcclxuICAgIC8vIHdoZW4gaW5pdCBjaGVjayB2aWV3IGhhcyBzY3JvbGwgYmFyXHJcbiAgICBjb25zdCB0b3RhbFdpZHRoID0gMDtcclxuICAgIGlmIChpc0luaXQpIHtcclxuICAgICAgLy8gcmVtYWluIG9uZSBlbG0gaGVpZ2h0XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyLmFkZENsYXNzKHRoaXMuY29udGFpbmVyRWxtLCAnbmd4LWhtLWNhcm91c2VsLWRpc3BsYXktbnB3cmFwJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmVsbVdpZHRoID0gKHRvdGFsV2lkdGggKyB0aGlzLnJvb3RFbG0uY2xpZW50V2lkdGgpIC8gdGhpcy5fc2hvd051bTtcclxuXHJcbiAgICB0aGlzLl9yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmNvbnRhaW5lckVsbSwgJ25neC1obS1jYXJvdXNlbC1kaXNwbGF5LW5wd3JhcCcpO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICd3aWR0aCcsIGAke3RoaXMuZWxtV2lkdGggKiB0aGlzLml0ZW1zRWxtLmxlbmd0aH1weGApO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICdwb3NpdGlvbicsICdyZWxhdGl2ZScpO1xyXG4gICAgdGhpcy5pdGVtc0VsbS5mb3JFYWNoKChlbG06IEhUTUxFbGVtZW50LCBpbmRleCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlci5zZXRTdHlsZShlbG0sICd3aWR0aCcsIGAke3RoaXMuZWxtV2lkdGh9cHhgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLmZpcnN0RWxtX2Nsb25lKSB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKHRoaXMuZmlyc3RFbG1fY2xvbmUsICd3aWR0aCcsIGAke3RoaXMuZWxtV2lkdGh9cHhgKTtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5MYXRlc3RFbG1fY2xvbmUsICd3aWR0aCcsIGAke3RoaXMuZWxtV2lkdGh9cHhgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYmluZEhhbW1lcigpIHtcclxuICAgIGNvbnN0IGhtID0gbmV3IEhhbW1lcih0aGlzLmNvbnRhaW5lckVsbSk7XHJcbiAgICBobS5nZXQoJ3BhbicpLnNldCh7IGRpcmVjdGlvbjogSGFtbWVyLkRJUkVDVElPTl9IT1JJWk9OVEFMIH0pO1xyXG5cclxuICAgIGhtLm9uKCdwYW5sZWZ0IHBhbnJpZ2h0IHBhbmVuZCB0YXAnLCAoZTogSGFtbWVySW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5jb250YWluZXJFbG0sICd0cmFuc2l0aW9uJyk7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyLmFkZENsYXNzKHRoaXMuY29udGFpbmVyRWxtLCAnZ3JhYmJpbmcnKTtcclxuICAgICAgaWYgKHRoaXMuYXV0b3BsYXkpIHtcclxuICAgICAgICB0aGlzLnN0b3BFdmVudC5uZXh0KCk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gY29uc29sZS5sb2coZS50eXBlKTtcclxuICAgICAgc3dpdGNoIChlLnR5cGUpIHtcclxuICAgICAgICBjYXNlICd0YXAnOlxyXG4gICAgICAgICAgdGhpcy5jYWxsQ2xpY2soZS5jZW50ZXIueCk7XHJcbiAgICAgICAgICB0aGlzLmNhbGxSZXN0YXJ0KCk7XHJcbiAgICAgICAgICB0aGlzLl9yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmNvbnRhaW5lckVsbSwgJ2dyYWJiaW5nJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdwYW5sZWZ0JzpcclxuICAgICAgICBjYXNlICdwYW5yaWdodCc6XHJcblxyXG4gICAgICAgICAgLy8g6aGv56S657i95pW46YeP5bCP5pa857i95pW46YeP77yM5YGc5q2i5ruR5YuVXHJcbiAgICAgICAgICBpZiAodGhpcy5zaG93TnVtID49IHRoaXMuaXRlbXNFbG0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFtbWVyLnN0b3AodHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUuZGVsdGFZKTtcclxuICAgICAgICAgIHRoaXMucHJlUGFuTW92ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgaWYgKE1hdGguYWJzKGUuZGVsdGFZKSA+IDUwKSB7IHJldHVybjsgfVxyXG4gICAgICAgICAgLy8gU2xvdyBkb3duIGF0IHRoZSBmaXJzdCBhbmQgbGFzdCBwYW5lLlxyXG4gICAgICAgICAgaWYgKCEodGhpcy5hdXRvcGxheSB8fCB0aGlzLmluZmluaXRlKSAmJiB0aGlzLm91dE9mQm91bmQoZS50eXBlKSkge1xyXG4gICAgICAgICAgICBlLmRlbHRhWCAqPSAwLjI7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICdsZWZ0JywgYCR7LXRoaXMuY3VycmVudEluZGV4ICogdGhpcy5lbG1XaWR0aCArIHRoaXMuYWxpZ25EaXN0YW5jZSArIGUuZGVsdGFYfXB4YCk7XHJcblxyXG4gICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ01hbnkpIHtcclxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGUuZGVsdGFYKSA+IHRoaXMuZWxtV2lkdGggKiAwLjUpIHtcclxuICAgICAgICAgICAgICBpZiAoZS5kZWx0YVggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCAtPSB0aGlzLnNjcm9sbE51bTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggKz0gdGhpcy5zY3JvbGxOdW07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuY29udGFpbmVyRWxtLCAnZ3JhYmJpbmcnKTtcclxuICAgICAgICAgICAgICB0aGlzLmNhbGxSZXN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5oYW1tZXIuc3RvcCh0cnVlKTtcclxuICAgICAgICAgICAgICAvLyByZW1lbWJlciBwcnYgYWN0aW9uLCB0byBhdm9pZCBoYW1tZXIgc3RvcCwgdGhlbiBjbGlja1xyXG4gICAgICAgICAgICAgIHRoaXMucHJlUGFuTW92ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3BhbmVuZCc6XHJcbiAgICAgICAgICB0aGlzLmNhbGxSZXN0YXJ0KCk7XHJcblxyXG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5jb250YWluZXJFbG0sICdncmFiYmluZycpO1xyXG4gICAgICAgICAgaWYgKE1hdGguYWJzKGUuZGVsdGFYKSA+IHRoaXMuZWxtV2lkdGggKiBQQU5CT1VOREFSWSkge1xyXG4gICAgICAgICAgICBjb25zdCBtb3ZlTnVtID0gdGhpcy5pc0RyYWdNYW55ID9cclxuICAgICAgICAgICAgICBNYXRoLmNlaWwoTWF0aC5hYnMoZS5kZWx0YVgpIC8gdGhpcy5lbG1XaWR0aCkgOiB0aGlzLnNjcm9sbE51bTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwcmV2SW5kZXggPSB0aGlzLmN1cnJlbnRJbmRleCAtIG1vdmVOdW07XHJcbiAgICAgICAgICAgIGxldCBuZXh0SW5kZXggPSB0aGlzLmN1cnJlbnRJbmRleCArIG1vdmVOdW07XHJcblxyXG4gICAgICAgICAgICAvLyDlpoLmnpzkuI3mmK/nhKHpmZDlvqrnkrDvvIzkuI3og73lpKfmlrzmiJblsI/mlrxcclxuXHJcbiAgICAgICAgICAgIGlmIChlLmRlbHRhWCA+IDApIHtcclxuICAgICAgICAgICAgICBpZiAoISh0aGlzLmF1dG9wbGF5IHx8IHRoaXMuaW5maW5pdGUpICYmIHByZXZJbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgIHByZXZJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdWaWV3KDApO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBwcmV2SW5kZXg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEodGhpcy5hdXRvcGxheSB8fCB0aGlzLmluZmluaXRlKSAmJiBuZXh0SW5kZXggPiB0aGlzLmxhc3RJbmRleCAtIHRoaXMuX3Nob3dOdW0gKyAxKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0SW5kZXggPSB0aGlzLmxhc3RJbmRleCAtIHRoaXMuX3Nob3dOdW0gKyAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3VmlldyhuZXh0SW5kZXgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IG5leHRJbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0RyYWdNYW55ICYmIHRoaXMucHJlUGFuTW92ZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuY2FsbENsaWNrKGUuY2VudGVyLngpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRJbmRleCk7XHJcbiAgICAgICAgICB0aGlzLmRyYXdWaWV3KHRoaXMuY3VycmVudEluZGV4KTtcclxuICAgICAgICAgIHRoaXMucHJlUGFuTW92ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBobTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYmluZENsaWNrKCkge1xyXG4gICAgaWYgKHRoaXMuYnRuTmV4dCAmJiB0aGlzLmJ0blByZXYpIHtcclxuICAgICAgdGhpcy5uZXh0TGlzdGVuZXIgPSB0aGlzLl9yZW5kZXJlci5saXN0ZW4odGhpcy5idG5OZXh0Lm5hdGl2ZUVsZW1lbnQsICdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCsrO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5wcmV2TGlzdGVuZXIgPSB0aGlzLl9yZW5kZXJlci5saXN0ZW4odGhpcy5idG5QcmV2Lm5hdGl2ZUVsZW1lbnQsICdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleC0tO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2FsbFJlc3RhcnQoKSB7XHJcbiAgICBpZiAodGhpcy5hdXRvcGxheSAmJiAhdGhpcy5tb3VzZU9uQ29udGFpbmVyKSB7XHJcbiAgICAgIHRoaXMucmVzdGFydC5uZXh0KG51bGwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjYWxsQ2xpY2socG9zaXRpb25YKSB7XHJcbiAgICAvLyBjbGljayBwb3NpdGlvbiBzdWJ0cmFjdCB0aGUgY29udGFpbmVybGVmIGFuZCBhbGlnbkRpc3RhbmNlIGlzIHRoZSBtb3ZlIGRpc3RhbmNlXHJcbiAgICBjb25zdCB0b0luZGV4ID0gdGhpcy5jdXJyZW50SW5kZXggKyBNYXRoLmZsb29yKChwb3NpdGlvblggLSB0aGlzLmNvbnRhaW5lcl9sZWZ0IC0gdGhpcy5hbGlnbkRpc3RhbmNlKSAvIHRoaXMuZWxtV2lkdGgpO1xyXG5cclxuICAgIGNvbnN0IGVsbSA9IHRoaXMuaXRlbXMudG9BcnJheSgpW3RvSW5kZXhdO1xyXG4gICAgaWYgKGVsbSkge1xyXG4gICAgICBlbG0uY2xpY2tFdmVudC5lbWl0KHRvSW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkcmF3VmlldyhpbmRleDogbnVtYmVyLCBpc0VtaXQgPSB0cnVlKSB7XHJcbiAgICBjb25zdCBsYXN0SW5kZXggPSB0aGlzLmxhc3RJbmRleDtcclxuXHJcbiAgICBpZiAodGhpcy5hdXRvcGxheSB8fCB0aGlzLmluZmluaXRlKSB7XHJcbiAgICAgIGlmIChpbmRleCA8IDApIHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50SW5kZXggPSBsYXN0SW5kZXg7XHJcbiAgICAgIH0gZWxzZSBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50SW5kZXggPSAwO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jdXJyZW50SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihpbmRleCwgdGhpcy5sYXN0SW5kZXgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDlj6rmnInnlbblpKfmlrwx5omN6KaB56e75YuVXHJcbiAgICBpZiAodGhpcy5pdGVtc0VsbS5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGNvbnN0IGxlZnREaXN0YW5jZSA9IChpbmRleCAqIHRoaXMuZWxtV2lkdGgpIC0gdGhpcy5hbGlnbkRpc3RhbmNlO1xyXG5cclxuICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICdsZWZ0JywgYCR7LWxlZnREaXN0YW5jZX1weGApO1xyXG4gICAgICBpZiAoaXNFbWl0KSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5jb250YWluZXJFbG0sICd0cmFuc2l0aW9uJyk7XHJcbiAgICAgICAgdGhpcy5pbmRleENoYW5nZWQuZW1pdCh0aGlzLmN1cnJlbnRJbmRleCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5jb250YWluZXJFbG0sICd0cmFuc2l0aW9uJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWmguaenOaYr+W+queSsOeahO+8jOeVtuWLleeVq+e1kOadn+WBt+WBt+eahOi3s+WIsOeVtuWJjeeahGluZGV444CBbGVmdOWOu1xyXG4gICAgICB0aGlzLkluZmluaXRlSGFuZGxlcihpbmRleCwgbGFzdEluZGV4KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKHRoaXMuY29udGFpbmVyRWxtLCAnbGVmdCcsIGAke3RoaXMuYWxpZ25EaXN0YW5jZX1weGApO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgSW5maW5pdGVIYW5kbGVyKGluZGV4OiBudW1iZXIsIGxhc3RJbmRleDogbnVtYmVyKSB7XHJcbiAgICBpZiAoKHRoaXMuYXV0b3BsYXkgfHwgdGhpcy5pbmZpbml0ZSkpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5jb250YWluZXJFbG0sICd0cmFuc2l0aW9uJyk7XHJcbiAgICAgICAgLy8g5aaC5p6c5piv5b6q55Kw55qE77yM55W25YuV55Wr57WQ5p2f5YG35YG355qE6Lez5Yiw55W25YmN55qEaW5kZXjjgIFsZWZ05Y67XHJcbiAgICAgICAgbGV0IGRpc3RhbmNlID0gMDtcclxuICAgICAgICBpZiAoaW5kZXggPD0gLTEpIHtcclxuICAgICAgICAgIGRpc3RhbmNlID0gKGxhc3RJbmRleCAqIHRoaXMuZWxtV2lkdGgpIC0gdGhpcy5hbGlnbkRpc3RhbmNlO1xyXG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICdsZWZ0JywgYCR7LWRpc3RhbmNlfXB4YCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xyXG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICdsZWZ0JywgYDBweGApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgdGhpcy5hbmlUaW1lKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgb3V0T2ZCb3VuZCh0eXBlKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSAncGFubGVmdCc6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEluZGV4ID49IHRoaXMubGFzdEluZGV4IC0gdGhpcy5fc2hvd051bSArIDE7XHJcbiAgICAgIGNhc2UgJ3BhbnJpZ2h0JzpcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50SW5kZXggPD0gMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcnVuUHJvZ3Jlc3MoYmV0d2VlblRpbWUpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgaG93VGltZXMgPSB0aGlzLnNwZWVkIC8gYmV0d2VlblRpbWU7XHJcbiAgICBjb25zdCBldmVyeUluY3JlYXNlID0gMTAwIC8gdGhpcy5zcGVlZCAqIGJldHdlZW5UaW1lO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ3Byb2dyZXNzJyk7XHJcbiAgICByZXR1cm4gaW50ZXJ2YWwoYmV0d2VlblRpbWUpLnBpcGUoXHJcbiAgICAgIHRhcCh0ID0+IHtcclxuICAgICAgICB0aGlzLnByb2dyZXNzV2lkdGggPSAodCAlIGhvd1RpbWVzKSAqIGV2ZXJ5SW5jcmVhc2U7XHJcbiAgICAgIH0pLFxyXG4gICAgICBidWZmZXJDb3VudChNYXRoLnJvdW5kKHRoaXMuc3BlZWQgLyBiZXR3ZWVuVGltZSksIDApXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRBdXRvTnVtKCkge1xyXG4gICAgY29uc3QgaW5pdE51bSA9IDM7XHJcbiAgICAvLyA2MTBcclxuICAgIGNvbnN0IHdpZHRoID0gdGhpcy5yb290RWxtLmNsaWVudFdpZHRoO1xyXG4gICAgaWYgKHdpZHRoID4gMzAwKSB7XHJcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKGluaXROdW0gKyAod2lkdGggLyAyMDApKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbml0TnVtO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTdHlsZShlbG06IEhUTUxFbGVtZW50LCBzdHlsZTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfSkge1xyXG4gICAgaWYgKHN0eWxlKSB7XHJcbiAgICAgIE9iamVjdC5rZXlzKHN0eWxlKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHN0eWxlW2tleV07XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUoZWxtLCBrZXksIHZhbHVlKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=