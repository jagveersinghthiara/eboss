!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common"],t):t(e["ngx-webcam"]={},e.ng.core,e.ng.common)}(this,function(e,t,i){"use strict";var r=function(){function e(e,t){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._mimeType=t,this._imageAsDataUrl=e}return Object.defineProperty(e.prototype,"imageAsBase64",{get:function(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=this.getDataFromDataUrl(this._imageAsDataUrl)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageAsDataUrl",{get:function(){return this._imageAsDataUrl},enumerable:!0,configurable:!0}),e.prototype.getDataFromDataUrl=function(e){return e.replace("data:"+this._mimeType+";base64,","")},e}(),n=function(){function e(){this.width=640,this.height=480,this.mediaStream=null,this.imageCapture=new t.EventEmitter,this.initError=new t.EventEmitter,this.imageClick=new t.EventEmitter}return e.prototype.ngAfterViewInit=function(){this.initWebcam()},e.prototype.ngOnDestroy=function(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()},Object.defineProperty(e.prototype,"trigger",{set:function(e){var t=this;this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this._trigger=e,this.triggerSubscription=this._trigger.subscribe(function(){t.takeSnapshot()})},enumerable:!0,configurable:!0}),e.prototype.takeSnapshot=function(){var e=this.video.nativeElement,t={width:this.width,height:this.height};e.videoWidth&&(t.width=e.videoWidth,t.height=e.videoHeight);var i=this.canvas.nativeElement;i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(this.video.nativeElement,0,0);var n="image/jpeg",a=i.toDataURL(n);this.imageCapture.next(new r(a,n))},e.prototype.initWebcam=function(){var e=this,t=this.video.nativeElement;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(function(i){e.mediaStream=i,t.srcObject=i,t.play()})["catch"](function(t){e.initError.next({message:t.message,mediaStreamError:t}),console.warn("Error initializing webcam",t)}):this.initError.next({message:"Cannot read UserMedia from MediaDevices."})},e.prototype.stopMediaTracks=function(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach(function(e){return e.stop()})},e.prototype.unsubscribeFromSubscriptions=function(){this.triggerSubscription&&this.triggerSubscription.unsubscribe()},e}();n.decorators=[{type:t.Component,args:[{selector:"webcam",template:'\n    <div class="webcam-wrapper" (click)="imageClick.next();">\n      <video #video [width]="width" [height]="height" autoplay muted playsinline></video>\n      <canvas #canvas [width]="width" [height]="height"></canvas>\n    </div>\n  ',styles:["\n    .webcam-wrapper {\n      display: inline-block;\n      line-height: 0; }\n      .webcam-wrapper canvas {\n        display: none; }\n  "]}]}],n.ctorParameters=function(){return[]},n.propDecorators={width:[{type:t.Input}],height:[{type:t.Input}],imageCapture:[{type:t.Output}],initError:[{type:t.Output}],imageClick:[{type:t.Output}],video:[{type:t.ViewChild,args:["video"]}],canvas:[{type:t.ViewChild,args:["canvas"]}],trigger:[{type:t.Input}]};var a=[n],o=function(){return function(){}}();o.decorators=[{type:t.NgModule,args:[{imports:[i.CommonModule],declarations:[a],exports:[a]}]}],o.ctorParameters=function(){return[]};var s=function(){return function(){this.message=null,this.mediaStreamError=null}}();e.WebcamModule=o,e.WebcamComponent=n,e.WebcamImage=r,e.WebcamInitError=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-webcam.umd.min.js.map
