import { Directive, Input, TemplateRef, ViewContainerRef, EventEmitter, Output, Component, ContentChild, ContentChildren, Inject, PLATFORM_ID, Renderer2, ViewChild, ViewEncapsulation, NgModule } from '@angular/core';
import ResizeObserver from 'resize-observer-polyfill';
import { Observable, BehaviorSubject, fromEvent, interval, merge, Subject } from 'rxjs';
import { debounceTime, tap, finalize, bufferCount, switchMap, takeUntil } from 'rxjs/operators';
import { isPlatformBrowser, CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class NgxHmCarouselDynamicDirective {
    /**
     * @param {?} _view
     * @param {?} _template
     */
    constructor(_view, _template) {
        this._view = _view;
        this._template = _template;
        this.compelete = false;
        this._view.clear();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set currentI(value) {
        if (!this.compelete) {
            const /** @type {?} */ nextI = value + 1;
            const /** @type {?} */ prevI = value - 1;
            if (this.index === 0 ||
                this.index === this.length - 1 ||
                this.index === nextI ||
                this.index === prevI ||
                this.index === value) {
                this._view.createEmbeddedView(this._template);
                this.compelete = true;
            }
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
}
NgxHmCarouselDynamicDirective.decorators = [
    { type: Directive, args: [{
                selector: '[ngxHmCarouselDynamic]'
            },] },
];
/** @nocollapse */
NgxHmCarouselDynamicDirective.ctorParameters = () => [
    { type: ViewContainerRef, },
    { type: TemplateRef, },
];
NgxHmCarouselDynamicDirective.propDecorators = {
    "index": [{ type: Input, args: ['ngxHmCarouselDynamic',] },],
    "length": [{ type: Input, args: ['ngxHmCarouselDynamicLength',] },],
    "currentI": [{ type: Input, args: ['ngxHmCarouselDynamicIndex',] },],
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class NgxHmCarouselItemDirective {
    constructor() {
        this.clickEvent = new EventEmitter();
    }
}
NgxHmCarouselItemDirective.decorators = [
    { type: Directive, args: [{
                selector: '[ngx-hm-carousel-item]'
            },] },
];
/** @nocollapse */
NgxHmCarouselItemDirective.ctorParameters = () => [];
NgxHmCarouselItemDirective.propDecorators = {
    "clickEvent": [{ type: Output, args: ['ngx-hm-carousel-item',] },],
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/**
 * An observable creator for element resize.
 * @param {?} elm the watch element.
 * @param {?} cb when resize complete, call back function.
 * @param {?=} time resize emit time, default is 200
 * @return {?}
 */
function resizeObservable(elm, cb, time = 200) {
    let /** @type {?} */ elmObserve$;
    return Observable.create((observer) => {
        elmObserve$ = new ResizeObserver((entries, obs) => {
            observer.next(elmObserve$);
        });
        elmObserve$.observe(elm);
    }).pipe(debounceTime(time), tap(() => {
        cb();
    }), finalize(() => {
        elmObserve$.unobserve(elm);
        elmObserve$.disconnect();
    }));
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
// if the pane is paned .25, switch to the next pane.
const /** @type {?} */ PANBOUNDARY = 0.15;
class NgxHmCarouselComponent {
    /**
     * @param {?} platformId
     * @param {?} _renderer
     */
    constructor(platformId, _renderer) {
        this.platformId = platformId;
        this._renderer = _renderer;
        this.aniTime = 400;
        this.align = 'center';
        this.infinite = false;
        this.mourseEnable = false;
        this.speed = 5000;
        this.delay = 8000;
        this.direction = 'right';
        this.scrollNum = 1;
        this.isDragMany = false;
        this.indexChanged = new EventEmitter();
        this.isFromAuto = true;
        this._currentIndex = 0;
        this._showNum = 1;
        this.isAutoNum = false;
        this._autoplay = false;
        this._porgressWidth = 0;
        this.alignDistance = 0;
        this.lastIndex = 0;
        this.elmWidth = 0;
        this.container_left = 0;
        this.mouseOnContainer = false;
        this.restart = new BehaviorSubject(null);
        this.stopEvent = new Subject();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set showNum(value) {
        if (value === 'auto') {
            this.isAutoNum = true;
        }
        else {
            this._showNum = value;
        }
    }
    /**
     * @return {?}
     */
    get showNum() {
        return this._showNum;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set currentIndex(value) {
        // if now index if not equale to save index, do someting
        if (this.currentIndex !== value) {
            this._currentIndex = value;
            if (this.itemsElm) {
                if (this.autoplay && !this.isFromAuto) {
                    this.stopEvent.next();
                    this.restart.next(null);
                }
                this.drawView(this.currentIndex);
            }
        }
        this.isFromAuto = false;
    }
    /**
     * @return {?}
     */
    get currentIndex() {
        return this._currentIndex;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set autoplay(value) {
        if (isPlatformBrowser(this.platformId)) {
            if (this.itemsElm) {
                this.progressWidth = 0;
                if (value) {
                    this.doNextSub$ = this.doNext.subscribe();
                }
                else {
                    if (this.doNextSub$) {
                        this.doNextSub$.unsubscribe();
                    }
                }
            }
        }
        this._autoplay = value;
    }
    /**
     * @return {?}
     */
    get autoplay() {
        return this._autoplay;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set progressWidth(value) {
        if (this.progressElm !== undefined && this.autoplay) {
            this._porgressWidth = value;
        }
    }
    /**
     * @return {?}
     */
    get progressWidth() {
        return this._porgressWidth;
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        this.initVariable();
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.setViewWidth(true);
        this.reSetVariable();
        this.hammer = this.bindHammer();
        this.drawView(this.currentIndex);
        this.bindClick();
        if (this.autoplay || this.infinite) {
            this.addInfiniteElm();
        }
        this.elmSub$ = resizeObservable(this.rootElm, () => this.containerResize()).subscribe();
    }
    /**
     * @return {?}
     */
    addInfiniteElm() {
        this.firstElm_clone = /** @type {?} */ (this.itemsElm[this.lastIndex].cloneNode(true));
        this.addStyle(this.firstElm_clone, {
            position: 'absolute',
            transform: 'translateX(-100%)'
        });
        this.LatestElm_clone = /** @type {?} */ (this.itemsElm[0].cloneNode(true));
        this.addStyle(this.LatestElm_clone, {
            position: 'absolute',
            right: 0,
            top: 0,
            transform: 'translateX(100%)'
        });
        this._renderer.insertBefore(this.containerElm, this.firstElm_clone, this.itemsElm[0]);
        this._renderer.appendChild(this.containerElm, this.LatestElm_clone);
    }
    /**
     * @return {?}
     */
    containerResize() {
        this.reSetVariable();
        this.setViewWidth();
        // 因為不能滑了，所以要回到第一個，以確保全部都有顯示
        if (this.showNum >= this.itemsElm.length) {
            this.currentIndex = 0;
        }
        this.drawView(this.currentIndex, false);
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.btnNext && this.btnPrev) {
            this.nextListener();
            this.prevListener();
        }
        this.hammer.destroy();
        if (this.autoplay) {
            this.doNextSub$.unsubscribe();
        }
        this.elmSub$.unsubscribe();
    }
    /**
     * @param {?} i
     * @return {?}
     */
    setIndex(i) {
        this.currentIndex = i;
    }
    /**
     * @return {?}
     */
    initVariable() {
        this.rootElm = this.parentChild.nativeElement;
        this.containerElm = /** @type {?} */ (this.rootElm.children[0]);
        this.itemsElm = /** @type {?} */ (Array.from(this.containerElm.children));
        this.lastIndex = this.itemsElm.length - 1;
        if (this.dotElm) {
            this.dots = new Array(this.itemsElm.length);
        }
        let /** @type {?} */ startEvent = this.restart.asObservable();
        let /** @type {?} */ stopEvent = this.stopEvent.asObservable();
        if (this.mourseEnable) {
            startEvent = merge(startEvent, fromEvent(this.containerElm, 'mouseleave').pipe(tap(() => this.mouseOnContainer = false)));
            stopEvent = merge(stopEvent, fromEvent(this.containerElm, 'mouseover').pipe(tap(() => this.mouseOnContainer = true)));
        }
        this.doNext = startEvent.pipe(debounceTime(this.delay), switchMap(() => this.runProgress(20).pipe(tap(() => {
            this.isFromAuto = true;
            // console.log('next');
            if (this.direction === 'left') {
                this.currentIndex -= this.scrollNum;
            }
            else {
                this.currentIndex += this.scrollNum;
            }
        }), takeUntil(stopEvent.pipe(tap(() => this.progressWidth = 0))))));
        if (this.autoplay) {
            this.doNextSub$ = this.doNext.subscribe();
        }
    }
    /**
     * @return {?}
     */
    reSetVariable() {
        this.container_left = this.rootElm.getBoundingClientRect().left;
        if (this.showNum && this.showNum !== 1) {
            switch (this.align) {
                case 'center':
                    this.alignDistance = (this.rootElm.clientWidth - this.elmWidth) / 2;
                    break;
                case 'left':
                    this.alignDistance = 0;
                    break;
                case 'right':
                    this.alignDistance = this.rootElm.clientWidth - this.elmWidth;
                    break;
            }
        }
        // console.log(this.alignDistance);
    }
    /**
     * @param {?=} isInit
     * @return {?}
     */
    setViewWidth(isInit) {
        if (this.isAutoNum) {
            this._showNum = this.getAutoNum();
        }
        this._renderer.addClass(this.containerElm, 'grab');
        // when init check view has scroll bar
        const /** @type {?} */ totalWidth = 0;
        if (isInit) {
            // remain one elm height
            this._renderer.addClass(this.containerElm, 'ngx-hm-carousel-display-npwrap');
        }
        this.elmWidth = (totalWidth + this.rootElm.clientWidth) / this._showNum;
        this._renderer.removeClass(this.containerElm, 'ngx-hm-carousel-display-npwrap');
        this._renderer.setStyle(this.containerElm, 'width', `${this.elmWidth * this.itemsElm.length}px`);
        this._renderer.setStyle(this.containerElm, 'position', 'relative');
        this.itemsElm.forEach((elm, index) => {
            this._renderer.setStyle(elm, 'width', `${this.elmWidth}px`);
        });
        if (this.firstElm_clone) {
            this._renderer.setStyle(this.firstElm_clone, 'width', `${this.elmWidth}px`);
            this._renderer.setStyle(this.LatestElm_clone, 'width', `${this.elmWidth}px`);
        }
    }
    /**
     * @return {?}
     */
    bindHammer() {
        const /** @type {?} */ hm = new Hammer(this.containerElm);
        hm.get('pan').set({ direction: Hammer.DIRECTION_HORIZONTAL });
        hm.on('panleft panright panend tap', (e) => {
            this._renderer.removeClass(this.containerElm, 'transition');
            this._renderer.addClass(this.containerElm, 'grabbing');
            if (this.autoplay) {
                this.stopEvent.next();
            }
            // console.log(e.type);
            switch (e.type) {
                case 'tap':
                    this.callClick(e.center.x);
                    this.callRestart();
                    this._renderer.removeClass(this.containerElm, 'grabbing');
                    break;
                case 'panleft':
                case 'panright':
                    // 顯示總數量小於總數量，停止滑動
                    if (this.showNum >= this.itemsElm.length) {
                        this.hammer.stop(true);
                        return;
                    }
                    // console.log(e.deltaY);
                    this.prePanMove = false;
                    if (Math.abs(e.deltaY) > 50) {
                        return;
                    }
                    // Slow down at the first and last pane.
                    if (!(this.autoplay || this.infinite) && this.outOfBound(e.type)) {
                        e.deltaX *= 0.2;
                    }
                    this._renderer.setStyle(this.containerElm, 'left', `${-this.currentIndex * this.elmWidth + this.alignDistance + e.deltaX}px`);
                    if (!this.isDragMany) {
                        if (Math.abs(e.deltaX) > this.elmWidth * 0.5) {
                            if (e.deltaX > 0) {
                                this.currentIndex -= this.scrollNum;
                            }
                            else {
                                this.currentIndex += this.scrollNum;
                            }
                            this._renderer.removeClass(this.containerElm, 'grabbing');
                            this.callRestart();
                            this.hammer.stop(true);
                            // remember prv action, to avoid hammer stop, then click
                            this.prePanMove = true;
                        }
                    }
                    break;
                case 'panend':
                    this.callRestart();
                    this._renderer.removeClass(this.containerElm, 'grabbing');
                    if (Math.abs(e.deltaX) > this.elmWidth * PANBOUNDARY) {
                        const /** @type {?} */ moveNum = this.isDragMany ?
                            Math.ceil(Math.abs(e.deltaX) / this.elmWidth) : this.scrollNum;
                        let /** @type {?} */ prevIndex = this.currentIndex - moveNum;
                        let /** @type {?} */ nextIndex = this.currentIndex + moveNum;
                        // 如果不是無限循環，不能大於或小於
                        if (e.deltaX > 0) {
                            if (!(this.autoplay || this.infinite) && prevIndex < 0) {
                                prevIndex = 0;
                                this.drawView(0);
                            }
                            this.currentIndex = prevIndex;
                        }
                        else {
                            if (!(this.autoplay || this.infinite) && nextIndex > this.lastIndex - this._showNum + 1) {
                                nextIndex = this.lastIndex - this._showNum + 1;
                                this.drawView(nextIndex);
                            }
                            this.currentIndex = nextIndex;
                        }
                        break;
                    }
                    else {
                        if (!this.isDragMany && this.prePanMove) {
                            this.callClick(e.center.x);
                        }
                    }
                    // console.log(this.currentIndex);
                    this.drawView(this.currentIndex);
                    this.prePanMove = false;
                    break;
            }
        });
        return hm;
    }
    /**
     * @return {?}
     */
    bindClick() {
        if (this.btnNext && this.btnPrev) {
            this.nextListener = this._renderer.listen(this.btnNext.nativeElement, 'click', () => {
                this.currentIndex++;
            });
            this.prevListener = this._renderer.listen(this.btnPrev.nativeElement, 'click', () => {
                this.currentIndex--;
            });
        }
    }
    /**
     * @return {?}
     */
    callRestart() {
        if (this.autoplay && !this.mouseOnContainer) {
            this.restart.next(null);
        }
    }
    /**
     * @param {?} positionX
     * @return {?}
     */
    callClick(positionX) {
        // click position subtract the containerlef and alignDistance is the move distance
        const /** @type {?} */ toIndex = this.currentIndex + Math.floor((positionX - this.container_left - this.alignDistance) / this.elmWidth);
        const /** @type {?} */ elm = this.items.toArray()[toIndex];
        if (elm) {
            elm.clickEvent.emit(toIndex);
        }
    }
    /**
     * @param {?} index
     * @param {?=} isEmit
     * @return {?}
     */
    drawView(index, isEmit = true) {
        const /** @type {?} */ lastIndex = this.lastIndex;
        if (this.autoplay || this.infinite) {
            if (index < 0) {
                this._currentIndex = lastIndex;
            }
            else if (index > lastIndex) {
                this._currentIndex = 0;
            }
        }
        else {
            this._currentIndex = Math.max(0, Math.min(index, this.lastIndex));
        }
        // 只有當大於1才要移動
        if (this.itemsElm.length > 1) {
            const /** @type {?} */ leftDistance = (index * this.elmWidth) - this.alignDistance;
            this._renderer.setStyle(this.containerElm, 'left', `${-leftDistance}px`);
            if (isEmit) {
                this._renderer.addClass(this.containerElm, 'transition');
                this.indexChanged.emit(this.currentIndex);
            }
            else {
                this._renderer.removeClass(this.containerElm, 'transition');
            }
            // 如果是循環的，當動畫結束偷偷的跳到當前的index、left去
            this.InfiniteHandler(index, lastIndex);
        }
        else {
            this._renderer.setStyle(this.containerElm, 'left', `${this.alignDistance}px`);
        }
    }
    /**
     * @param {?} index
     * @param {?} lastIndex
     * @return {?}
     */
    InfiniteHandler(index, lastIndex) {
        if ((this.autoplay || this.infinite)) {
            setTimeout(() => {
                this._renderer.removeClass(this.containerElm, 'transition');
                // 如果是循環的，當動畫結束偷偷的跳到當前的index、left去
                let /** @type {?} */ distance = 0;
                if (index <= -1) {
                    distance = (lastIndex * this.elmWidth) - this.alignDistance;
                    this._renderer.setStyle(this.containerElm, 'left', `${-distance}px`);
                }
                else if (index > lastIndex) {
                    this._renderer.setStyle(this.containerElm, 'left', `0px`);
                }
            }, this.aniTime);
        }
    }
    /**
     * @param {?} type
     * @return {?}
     */
    outOfBound(type) {
        switch (type) {
            case 'panleft':
                return this.currentIndex >= this.lastIndex - this._showNum + 1;
            case 'panright':
                return this.currentIndex <= 0;
        }
    }
    /**
     * @param {?} betweenTime
     * @return {?}
     */
    runProgress(betweenTime) {
        const /** @type {?} */ howTimes = this.speed / betweenTime;
        const /** @type {?} */ everyIncrease = 100 / this.speed * betweenTime;
        // console.log('progress');
        return interval(betweenTime).pipe(tap(t => {
            this.progressWidth = (t % howTimes) * everyIncrease;
        }), bufferCount(Math.round(this.speed / betweenTime), 0));
    }
    /**
     * @return {?}
     */
    getAutoNum() {
        const /** @type {?} */ initNum = 3;
        // 610
        const /** @type {?} */ width = this.rootElm.clientWidth;
        if (width > 300) {
            return Math.floor(initNum + (width / 200));
        }
        return initNum;
    }
    /**
     * @param {?} elm
     * @param {?} style
     * @return {?}
     */
    addStyle(elm, style) {
        if (style) {
            Object.keys(style).forEach((key) => {
                const /** @type {?} */ value = style[key];
                this._renderer.setStyle(elm, key, value);
            });
        }
    }
}
NgxHmCarouselComponent.decorators = [
    { type: Component, args: [{
                selector: 'ngx-hm-carousel',
                template: `<div #parentChild class="carousel">
  <ng-content select="[ngx-hm-carousel-container]"></ng-content>
  <!-- left -->
  <div #prev *ngIf="contentPrev"
    class="direction left">
    <ng-container *ngTemplateOutlet="contentPrev"></ng-container>
  </div>
  <!--  right -->
  <div #next *ngIf="contentNext"
    class="direction right">
    <ng-container *ngTemplateOutlet="contentNext"></ng-container>
  </div>
  <!-- indicators -->
  <ul class="indicators" *ngIf="dotElm">
    <li
      *ngFor="let dot of dots; let i = index;"
      (click)="setIndex(i)">
      <ng-container
        *ngTemplateOutlet="dotElm, context: {
          $implicit: {
            index : i,
            currentIndex : currentIndex
          }
        }">
      </ng-container>
    </li>
  </ul>
  <!-- progress -->
  <div *ngIf="progressElm && autoplay">
    <ng-container
      *ngTemplateOutlet="progressElm, context: {
        $implicit: {
          progress:progressWidth
        }
      }">
    </ng-container>
  </div>
</div>
`,
                styles: [`:host{display:block;height:100%}.ngx-hm-carousel-display-npwrap{display:flex!important;flex-wrap:nowrap!important;flex-direction:row!important;overflow:hidden!important}.carousel{overflow:hidden;position:relative;width:100%;height:100%}.carousel ul.indicators{list-style:none;bottom:1rem;left:0;margin:0;padding:0;position:absolute;text-align:center;width:100%}.carousel ul.indicators li{cursor:pointer;display:inline-block;position:relative;padding:.5rem}.carousel .direction{position:absolute;height:100%;display:flex;align-items:center;justify-content:center;top:0}.carousel .direction.left{left:0}.carousel .direction.right{position:absolute;right:0}.transition{transition:all .4s ease-in-out}.grab{cursor:-webkit-grab;cursor:grab}.grabbing{cursor:-webkit-grabbing;cursor:grabbing}.pointer{cursor:pointer}`],
                encapsulation: ViewEncapsulation.None
            },] },
];
/** @nocollapse */
NgxHmCarouselComponent.ctorParameters = () => [
    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] },] },
    { type: Renderer2, },
];
NgxHmCarouselComponent.propDecorators = {
    "parentChild": [{ type: ViewChild, args: ['parentChild',] },],
    "btnPrev": [{ type: ViewChild, args: ['prev',] },],
    "btnNext": [{ type: ViewChild, args: ['next',] },],
    "items": [{ type: ContentChildren, args: [NgxHmCarouselItemDirective,] },],
    "contentPrev": [{ type: ContentChild, args: ['carouselPrev',] },],
    "contentNext": [{ type: ContentChild, args: ['carouselNext',] },],
    "dotElm": [{ type: ContentChild, args: ['carouselDot',] },],
    "progressElm": [{ type: ContentChild, args: ['carouselProgress',] },],
    "aniTime": [{ type: Input, args: ['aniTime',] },],
    "align": [{ type: Input, args: ['align',] },],
    "infinite": [{ type: Input, args: ['infinite',] },],
    "mourseEnable": [{ type: Input, args: ['mourse-enable',] },],
    "speed": [{ type: Input, args: ['autoplay-speed',] },],
    "delay": [{ type: Input, args: ['between-delay',] },],
    "direction": [{ type: Input, args: ['autoplay-direction',] },],
    "showNum": [{ type: Input, args: ['show-num',] },],
    "scrollNum": [{ type: Input, args: ['scroll-num',] },],
    "isDragMany": [{ type: Input, args: ['drag-many',] },],
    "currentIndex": [{ type: Input, args: ['current-index',] },],
    "autoplay": [{ type: Input, args: ['autoplay',] },],
    "indexChanged": [{ type: Output, args: ['index-change',] },],
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class NgxHmCarouselModule {
}
NgxHmCarouselModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    FormsModule,
                ],
                declarations: [
                    NgxHmCarouselComponent,
                    NgxHmCarouselItemDirective,
                    NgxHmCarouselDynamicDirective
                ],
                exports: [
                    NgxHmCarouselComponent,
                    NgxHmCarouselItemDirective,
                    NgxHmCarouselDynamicDirective
                ]
            },] },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { NgxHmCarouselDynamicDirective, NgxHmCarouselItemDirective, NgxHmCarouselComponent, NgxHmCarouselModule, resizeObservable };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWhtLWNhcm91c2VsLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9uZ3gtaG0tY2Fyb3VzZWwvbGliL25neC1obS1jYXJvdXNlbC1keW5hbWljLmRpcmVjdGl2ZS50cyIsIm5nOi8vbmd4LWhtLWNhcm91c2VsL2xpYi9uZ3gtaG0tY2Fyb3VzZWwtaXRlbS5kaXJlY3RpdmUudHMiLCJuZzovL25neC1obS1jYXJvdXNlbC9saWIvcnhqcy5vYnNlcnZhYmxlLnJlc2l6ZS50cyIsIm5nOi8vbmd4LWhtLWNhcm91c2VsL2xpYi9uZ3gtaG0tY2Fyb3VzZWwuY29tcG9uZW50LnRzIiwibmc6Ly9uZ3gtaG0tY2Fyb3VzZWwvbGliL25neC1obS1jYXJvdXNlbC5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0aXZlLCBJbnB1dCwgT25Jbml0LCBUZW1wbGF0ZVJlZiwgVmlld0NvbnRhaW5lclJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuQERpcmVjdGl2ZSh7XHJcbiAgc2VsZWN0b3I6ICdbbmd4SG1DYXJvdXNlbER5bmFtaWNdJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgTmd4SG1DYXJvdXNlbER5bmFtaWNEaXJlY3RpdmUgaW1wbGVtZW50cyBPbkluaXQge1xyXG5cclxuICBASW5wdXQoJ25neEhtQ2Fyb3VzZWxEeW5hbWljJykgaW5kZXg6IG51bWJlcjtcclxuICBASW5wdXQoJ25neEhtQ2Fyb3VzZWxEeW5hbWljTGVuZ3RoJykgbGVuZ3RoOiBudW1iZXI7XHJcbiAgQElucHV0KCduZ3hIbUNhcm91c2VsRHluYW1pY0luZGV4JylcclxuXHJcbiAgc2V0IGN1cnJlbnRJKHZhbHVlOiBudW1iZXIpIHtcclxuICAgIGlmICghdGhpcy5jb21wZWxldGUpIHtcclxuXHJcbiAgICAgIGNvbnN0IG5leHRJID0gdmFsdWUgKyAxO1xyXG4gICAgICBjb25zdCBwcmV2SSA9IHZhbHVlIC0gMTtcclxuXHJcbiAgICAgIGlmIChcclxuICAgICAgICB0aGlzLmluZGV4ID09PSAwIHx8XHJcbiAgICAgICAgdGhpcy5pbmRleCA9PT0gdGhpcy5sZW5ndGggLSAxIHx8XHJcbiAgICAgICAgdGhpcy5pbmRleCA9PT0gbmV4dEkgfHxcclxuICAgICAgICB0aGlzLmluZGV4ID09PSBwcmV2SSB8fFxyXG4gICAgICAgIHRoaXMuaW5kZXggPT09IHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fdmlldy5jcmVhdGVFbWJlZGRlZFZpZXcodGhpcy5fdGVtcGxhdGUpO1xyXG4gICAgICAgIHRoaXMuY29tcGVsZXRlID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb21wZWxldGUgPSBmYWxzZTtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgX3ZpZXc6IFZpZXdDb250YWluZXJSZWYsXHJcbiAgICBwcml2YXRlIF90ZW1wbGF0ZTogVGVtcGxhdGVSZWY8YW55Pikge1xyXG4gICAgdGhpcy5fdmlldy5jbGVhcigpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKTogdm9pZCB7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBEaXJlY3RpdmUsIEV2ZW50RW1pdHRlciwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5ARGlyZWN0aXZlKHtcclxuICBzZWxlY3RvcjogJ1tuZ3gtaG0tY2Fyb3VzZWwtaXRlbV0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBOZ3hIbUNhcm91c2VsSXRlbURpcmVjdGl2ZSB7XHJcbiAgQE91dHB1dCgnbmd4LWhtLWNhcm91c2VsLWl0ZW0nKSBjbGlja0V2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXI+KCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG59XHJcbiIsImltcG9ydCBSZXNpemVPYnNlcnZlciBmcm9tICdyZXNpemUtb2JzZXJ2ZXItcG9seWZpbGwnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpYmVyIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IGRlYm91bmNlVGltZSwgdGFwLCBmaW5hbGl6ZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbi8qKlxyXG4gKiBBbiBvYnNlcnZhYmxlIGNyZWF0b3IgZm9yIGVsZW1lbnQgcmVzaXplLlxyXG4gKiBAcGFyYW0gZWxtIHRoZSB3YXRjaCBlbGVtZW50LlxyXG4gKiBAcGFyYW0gY2Igd2hlbiByZXNpemUgY29tcGxldGUsIGNhbGwgYmFjayBmdW5jdGlvbi5cclxuICogQHBhcmFtIHRpbWUgcmVzaXplIGVtaXQgdGltZSwgZGVmYXVsdCBpcyAyMDBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNpemVPYnNlcnZhYmxlKGVsbTogSFRNTEVsZW1lbnQsIGNiOiAoKSA9PiB2b2lkLCB0aW1lID0gMjAwKTogT2JzZXJ2YWJsZTxhbnk+IHtcclxuICBsZXQgZWxtT2JzZXJ2ZSQ6IFJlc2l6ZU9ic2VydmVyO1xyXG4gIHJldHVybiBPYnNlcnZhYmxlLmNyZWF0ZSgob2JzZXJ2ZXI6IFN1YnNjcmliZXI8YW55PikgPT4ge1xyXG4gICAgZWxtT2JzZXJ2ZSQgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKGVudHJpZXMsIG9icykgPT4ge1xyXG4gICAgICBvYnNlcnZlci5uZXh0KGVsbU9ic2VydmUkKTtcclxuICAgIH0pO1xyXG4gICAgZWxtT2JzZXJ2ZSQub2JzZXJ2ZShlbG0pO1xyXG4gIH0pLnBpcGUoXHJcbiAgICBkZWJvdW5jZVRpbWUodGltZSksXHJcbiAgICB0YXAoKCkgPT4ge1xyXG4gICAgICBjYigpO1xyXG4gICAgfSksXHJcbiAgICBmaW5hbGl6ZSgoKSA9PiB7XHJcbiAgICAgIGVsbU9ic2VydmUkLnVub2JzZXJ2ZShlbG0pO1xyXG4gICAgICBlbG1PYnNlcnZlJC5kaXNjb25uZWN0KCk7XHJcbiAgICB9KVxyXG4gICk7XHJcbn1cclxuIiwiaW1wb3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge1xyXG4gIEFmdGVyQ29udGVudEluaXQsXHJcbiAgQWZ0ZXJWaWV3SW5pdCxcclxuICBDb21wb25lbnQsXHJcbiAgQ29udGVudENoaWxkLFxyXG4gIENvbnRlbnRDaGlsZHJlbixcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBJbmplY3QsXHJcbiAgSW5wdXQsXHJcbiAgT25EZXN0cm95LFxyXG4gIE91dHB1dCxcclxuICBQTEFURk9STV9JRCxcclxuICBRdWVyeUxpc3QsXHJcbiAgUmVuZGVyZXIyLFxyXG4gIFRlbXBsYXRlUmVmLFxyXG4gIFZpZXdDaGlsZCxcclxuICBWaWV3RW5jYXBzdWxhdGlvbixcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlLCBmcm9tRXZlbnQsIGludGVydmFsLCBtZXJnZSwgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IGJ1ZmZlckNvdW50LCBkZWJvdW5jZVRpbWUsIHN3aXRjaE1hcCwgdGFrZVVudGlsLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcblxyXG5pbXBvcnQgeyBOZ3hIbUNhcm91c2VsSXRlbURpcmVjdGl2ZSB9IGZyb20gJy4vbmd4LWhtLWNhcm91c2VsLWl0ZW0uZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgcmVzaXplT2JzZXJ2YWJsZSB9IGZyb20gJy4vcnhqcy5vYnNlcnZhYmxlLnJlc2l6ZSc7XHJcblxyXG4vLyBpZiB0aGUgcGFuZSBpcyBwYW5lZCAuMjUsIHN3aXRjaCB0byB0aGUgbmV4dCBwYW5lLlxyXG5jb25zdCBQQU5CT1VOREFSWSA9IDAuMTU7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ25neC1obS1jYXJvdXNlbCcsXHJcbiAgdGVtcGxhdGU6IGA8ZGl2ICNwYXJlbnRDaGlsZCBjbGFzcz1cImNhcm91c2VsXCI+XHJcbiAgPG5nLWNvbnRlbnQgc2VsZWN0PVwiW25neC1obS1jYXJvdXNlbC1jb250YWluZXJdXCI+PC9uZy1jb250ZW50PlxyXG4gIDwhLS0gbGVmdCAtLT5cclxuICA8ZGl2ICNwcmV2ICpuZ0lmPVwiY29udGVudFByZXZcIlxyXG4gICAgY2xhc3M9XCJkaXJlY3Rpb24gbGVmdFwiPlxyXG4gICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cImNvbnRlbnRQcmV2XCI+PC9uZy1jb250YWluZXI+XHJcbiAgPC9kaXY+XHJcbiAgPCEtLSAgcmlnaHQgLS0+XHJcbiAgPGRpdiAjbmV4dCAqbmdJZj1cImNvbnRlbnROZXh0XCJcclxuICAgIGNsYXNzPVwiZGlyZWN0aW9uIHJpZ2h0XCI+XHJcbiAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiY29udGVudE5leHRcIj48L25nLWNvbnRhaW5lcj5cclxuICA8L2Rpdj5cclxuICA8IS0tIGluZGljYXRvcnMgLS0+XHJcbiAgPHVsIGNsYXNzPVwiaW5kaWNhdG9yc1wiICpuZ0lmPVwiZG90RWxtXCI+XHJcbiAgICA8bGlcclxuICAgICAgKm5nRm9yPVwibGV0IGRvdCBvZiBkb3RzOyBsZXQgaSA9IGluZGV4O1wiXHJcbiAgICAgIChjbGljayk9XCJzZXRJbmRleChpKVwiPlxyXG4gICAgICA8bmctY29udGFpbmVyXHJcbiAgICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJkb3RFbG0sIGNvbnRleHQ6IHtcclxuICAgICAgICAgICRpbXBsaWNpdDoge1xyXG4gICAgICAgICAgICBpbmRleCA6IGksXHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmRleCA6IGN1cnJlbnRJbmRleFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cIj5cclxuICAgICAgPC9uZy1jb250YWluZXI+XHJcbiAgICA8L2xpPlxyXG4gIDwvdWw+XHJcbiAgPCEtLSBwcm9ncmVzcyAtLT5cclxuICA8ZGl2ICpuZ0lmPVwicHJvZ3Jlc3NFbG0gJiYgYXV0b3BsYXlcIj5cclxuICAgIDxuZy1jb250YWluZXJcclxuICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJwcm9ncmVzc0VsbSwgY29udGV4dDoge1xyXG4gICAgICAgICRpbXBsaWNpdDoge1xyXG4gICAgICAgICAgcHJvZ3Jlc3M6cHJvZ3Jlc3NXaWR0aFxyXG4gICAgICAgIH1cclxuICAgICAgfVwiPlxyXG4gICAgPC9uZy1jb250YWluZXI+XHJcbiAgPC9kaXY+XHJcbjwvZGl2PlxyXG5gLFxyXG4gIHN0eWxlczogW2A6aG9zdHtkaXNwbGF5OmJsb2NrO2hlaWdodDoxMDAlfS5uZ3gtaG0tY2Fyb3VzZWwtZGlzcGxheS1ucHdyYXB7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtmbGV4LXdyYXA6bm93cmFwIWltcG9ydGFudDtmbGV4LWRpcmVjdGlvbjpyb3chaW1wb3J0YW50O292ZXJmbG93OmhpZGRlbiFpbXBvcnRhbnR9LmNhcm91c2Vse292ZXJmbG93OmhpZGRlbjtwb3NpdGlvbjpyZWxhdGl2ZTt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfS5jYXJvdXNlbCB1bC5pbmRpY2F0b3Jze2xpc3Qtc3R5bGU6bm9uZTtib3R0b206MXJlbTtsZWZ0OjA7bWFyZ2luOjA7cGFkZGluZzowO3Bvc2l0aW9uOmFic29sdXRlO3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOjEwMCV9LmNhcm91c2VsIHVsLmluZGljYXRvcnMgbGl7Y3Vyc29yOnBvaW50ZXI7ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzouNXJlbX0uY2Fyb3VzZWwgLmRpcmVjdGlvbntwb3NpdGlvbjphYnNvbHV0ZTtoZWlnaHQ6MTAwJTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7dG9wOjB9LmNhcm91c2VsIC5kaXJlY3Rpb24ubGVmdHtsZWZ0OjB9LmNhcm91c2VsIC5kaXJlY3Rpb24ucmlnaHR7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MH0udHJhbnNpdGlvbnt0cmFuc2l0aW9uOmFsbCAuNHMgZWFzZS1pbi1vdXR9LmdyYWJ7Y3Vyc29yOi13ZWJraXQtZ3JhYjtjdXJzb3I6Z3JhYn0uZ3JhYmJpbmd7Y3Vyc29yOi13ZWJraXQtZ3JhYmJpbmc7Y3Vyc29yOmdyYWJiaW5nfS5wb2ludGVye2N1cnNvcjpwb2ludGVyfWBdLFxyXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmVcclxufSlcclxuZXhwb3J0IGNsYXNzIE5neEhtQ2Fyb3VzZWxDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBBZnRlckNvbnRlbnRJbml0LCBPbkRlc3Ryb3kge1xyXG4gIEBWaWV3Q2hpbGQoJ3BhcmVudENoaWxkJykgcGFyZW50Q2hpbGQ7XHJcbiAgQFZpZXdDaGlsZCgncHJldicpIHByaXZhdGUgYnRuUHJldjogRWxlbWVudFJlZjtcclxuICBAVmlld0NoaWxkKCduZXh0JykgcHJpdmF0ZSBidG5OZXh0OiBFbGVtZW50UmVmO1xyXG4gIEBDb250ZW50Q2hpbGRyZW4oTmd4SG1DYXJvdXNlbEl0ZW1EaXJlY3RpdmUpIGl0ZW1zOiBRdWVyeUxpc3Q8Tmd4SG1DYXJvdXNlbEl0ZW1EaXJlY3RpdmU+O1xyXG4gIEBDb250ZW50Q2hpbGQoJ2Nhcm91c2VsUHJldicpIGNvbnRlbnRQcmV2OiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBDb250ZW50Q2hpbGQoJ2Nhcm91c2VsTmV4dCcpIGNvbnRlbnROZXh0OiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBDb250ZW50Q2hpbGQoJ2Nhcm91c2VsRG90JykgZG90RWxtOiBUZW1wbGF0ZVJlZjxhbnk+O1xyXG4gIEBDb250ZW50Q2hpbGQoJ2Nhcm91c2VsUHJvZ3Jlc3MnKSBwcm9ncmVzc0VsbTogVGVtcGxhdGVSZWY8YW55PjtcclxuXHJcbiAgQElucHV0KCdhbmlUaW1lJykgYW5pVGltZSA9IDQwMDtcclxuICBASW5wdXQoJ2FsaWduJykgYWxpZ246ICdsZWZ0JyB8ICdjZW50ZXInIHwgJ3JpZ2h0JyA9ICdjZW50ZXInO1xyXG4gIEBJbnB1dCgnaW5maW5pdGUnKSBpbmZpbml0ZSA9IGZhbHNlO1xyXG4gIEBJbnB1dCgnbW91cnNlLWVuYWJsZScpIG1vdXJzZUVuYWJsZSA9IGZhbHNlO1xyXG4gIEBJbnB1dCgnYXV0b3BsYXktc3BlZWQnKSBzcGVlZCA9IDUwMDA7XHJcbiAgQElucHV0KCdiZXR3ZWVuLWRlbGF5JykgZGVsYXkgPSA4MDAwO1xyXG4gIEBJbnB1dCgnYXV0b3BsYXktZGlyZWN0aW9uJykgZGlyZWN0aW9uOiAnbGVmdCcgfCAncmlnaHQnID0gJ3JpZ2h0JztcclxuICBASW5wdXQoJ3Nob3ctbnVtJylcclxuICBzZXQgc2hvd051bSh2YWx1ZTogbnVtYmVyIHwgJ2F1dG8nKSB7XHJcbiAgICBpZiAodmFsdWUgPT09ICdhdXRvJykge1xyXG4gICAgICB0aGlzLmlzQXV0b051bSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zaG93TnVtID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBzaG93TnVtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Nob3dOdW07XHJcbiAgfVxyXG4gIEBJbnB1dCgnc2Nyb2xsLW51bScpIHNjcm9sbE51bSA9IDE7XHJcbiAgQElucHV0KCdkcmFnLW1hbnknKSBpc0RyYWdNYW55ID0gZmFsc2U7XHJcbiAgQElucHV0KCdjdXJyZW50LWluZGV4JylcclxuICBzZXQgY3VycmVudEluZGV4KHZhbHVlKSB7XHJcbiAgICAvLyBpZiBub3cgaW5kZXggaWYgbm90IGVxdWFsZSB0byBzYXZlIGluZGV4LCBkbyBzb21ldGluZ1xyXG4gICAgaWYgKHRoaXMuY3VycmVudEluZGV4ICE9PSB2YWx1ZSkge1xyXG4gICAgICB0aGlzLl9jdXJyZW50SW5kZXggPSB2YWx1ZTtcclxuXHJcbiAgICAgIGlmICh0aGlzLml0ZW1zRWxtKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b3BsYXkgJiYgIXRoaXMuaXNGcm9tQXV0bykge1xyXG4gICAgICAgICAgdGhpcy5zdG9wRXZlbnQubmV4dCgpO1xyXG4gICAgICAgICAgdGhpcy5yZXN0YXJ0Lm5leHQobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZHJhd1ZpZXcodGhpcy5jdXJyZW50SW5kZXgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmlzRnJvbUF1dG8gPSBmYWxzZTtcclxuICB9XHJcbiAgZ2V0IGN1cnJlbnRJbmRleCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jdXJyZW50SW5kZXg7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoJ2F1dG9wbGF5JylcclxuICBzZXQgYXV0b3BsYXkodmFsdWUpIHtcclxuICAgIGlmIChpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB7XHJcbiAgICAgIGlmICh0aGlzLml0ZW1zRWxtKSB7XHJcbiAgICAgICAgdGhpcy5wcm9ncmVzc1dpZHRoID0gMDtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgIHRoaXMuZG9OZXh0U3ViJCA9IHRoaXMuZG9OZXh0LnN1YnNjcmliZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5kb05leHRTdWIkKSB7IHRoaXMuZG9OZXh0U3ViJC51bnN1YnNjcmliZSgpOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLl9hdXRvcGxheSA9IHZhbHVlO1xyXG4gIH1cclxuICBnZXQgYXV0b3BsYXkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXV0b3BsYXk7XHJcbiAgfVxyXG5cclxuICBAT3V0cHV0KCdpbmRleC1jaGFuZ2UnKSBpbmRleENoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XHJcbiAgc2V0IHByb2dyZXNzV2lkdGgodmFsdWUpIHtcclxuICAgIGlmICh0aGlzLnByb2dyZXNzRWxtICE9PSB1bmRlZmluZWQgJiYgdGhpcy5hdXRvcGxheSkge1xyXG4gICAgICB0aGlzLl9wb3JncmVzc1dpZHRoID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGdldCBwcm9ncmVzc1dpZHRoKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3BvcmdyZXNzV2lkdGg7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzRnJvbUF1dG8gPSB0cnVlO1xyXG4gIHByaXZhdGUgX2N1cnJlbnRJbmRleCA9IDA7XHJcbiAgcHJpdmF0ZSBfc2hvd051bSA9IDE7XHJcbiAgcHJpdmF0ZSBpc0F1dG9OdW0gPSBmYWxzZTtcclxuICBwcml2YXRlIF9hdXRvcGxheSA9IGZhbHNlO1xyXG4gIHByaXZhdGUgX3BvcmdyZXNzV2lkdGggPSAwO1xyXG5cclxuICBwcml2YXRlIHJvb3RFbG06IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgYWxpZ25EaXN0YW5jZSA9IDA7XHJcbiAgcHJpdmF0ZSBjb250YWluZXJFbG06IEhUTUxFbGVtZW50O1xyXG4gIHByaXZhdGUgaXRlbXNFbG06IEFycmF5PEhUTUxFbGVtZW50PjtcclxuICBwcml2YXRlIGxhc3RJbmRleCA9IDA7XHJcbiAgcHJpdmF0ZSBoYW1tZXI6IEhhbW1lck1hbmFnZXI7XHJcbiAgcHJpdmF0ZSBlbG1XaWR0aCA9IDA7XHJcbiAgcHJpdmF0ZSBjb250YWluZXJfbGVmdCA9IDA7XHJcblxyXG4gIHByaXZhdGUgbW91c2VPbkNvbnRhaW5lciA9IGZhbHNlO1xyXG4gIHByaXZhdGUgcmVzdGFydCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8YW55PihudWxsKTtcclxuICBwcml2YXRlIHN0b3BFdmVudCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuXHJcbiAgcHJpdmF0ZSBkb05leHQ6IE9ic2VydmFibGU8YW55PjtcclxuICBwcml2YXRlIGRvTmV4dFN1YiQ6IFN1YnNjcmlwdGlvbjtcclxuICBwcml2YXRlIGVsbVN1YiQ6IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgcHJpdmF0ZSBmaXJzdEVsbV9jbG9uZTtcclxuICBwcml2YXRlIExhdGVzdEVsbV9jbG9uZTtcclxuICBwcml2YXRlIHByZVBhbk1vdmU6IGJvb2xlYW47XHJcbiAgcHVibGljIGRvdHM6IEFycmF5PG51bWJlcj47XHJcbiAgcHJpdmF0ZSBuZXh0TGlzdGVuZXI6ICgpID0+IHZvaWQ7XHJcbiAgcHJpdmF0ZSBwcmV2TGlzdGVuZXI6ICgpID0+IHZvaWQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSBwbGF0Zm9ybUlkOiBPYmplY3QsXHJcbiAgICBwcml2YXRlIF9yZW5kZXJlcjogUmVuZGVyZXIyKSB7IH1cclxuXHJcbiAgbmdBZnRlckNvbnRlbnRJbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5pbml0VmFyaWFibGUoKTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIHRoaXMuc2V0Vmlld1dpZHRoKHRydWUpO1xyXG4gICAgdGhpcy5yZVNldFZhcmlhYmxlKCk7XHJcbiAgICB0aGlzLmhhbW1lciA9IHRoaXMuYmluZEhhbW1lcigpO1xyXG4gICAgdGhpcy5kcmF3Vmlldyh0aGlzLmN1cnJlbnRJbmRleCk7XHJcbiAgICB0aGlzLmJpbmRDbGljaygpO1xyXG5cclxuICAgIGlmICh0aGlzLmF1dG9wbGF5IHx8IHRoaXMuaW5maW5pdGUpIHtcclxuICAgICAgdGhpcy5hZGRJbmZpbml0ZUVsbSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZWxtU3ViJCA9IHJlc2l6ZU9ic2VydmFibGUodGhpcy5yb290RWxtLCAoKSA9PiB0aGlzLmNvbnRhaW5lclJlc2l6ZSgpKS5zdWJzY3JpYmUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkSW5maW5pdGVFbG0oKSB7XHJcbiAgICB0aGlzLmZpcnN0RWxtX2Nsb25lID0gdGhpcy5pdGVtc0VsbVt0aGlzLmxhc3RJbmRleF0uY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgdGhpcy5hZGRTdHlsZSh0aGlzLmZpcnN0RWxtX2Nsb25lLCB7XHJcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKC0xMDAlKSdcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICB0aGlzLkxhdGVzdEVsbV9jbG9uZSA9IHRoaXMuaXRlbXNFbG1bMF0uY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgdGhpcy5hZGRTdHlsZSh0aGlzLkxhdGVzdEVsbV9jbG9uZSwge1xyXG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgIHRvcDogMCxcclxuICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgxMDAlKSdcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3JlbmRlcmVyLmluc2VydEJlZm9yZSh0aGlzLmNvbnRhaW5lckVsbSwgdGhpcy5maXJzdEVsbV9jbG9uZSwgdGhpcy5pdGVtc0VsbVswXSk7XHJcbiAgICB0aGlzLl9yZW5kZXJlci5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lckVsbSwgdGhpcy5MYXRlc3RFbG1fY2xvbmUpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjb250YWluZXJSZXNpemUoKSB7XHJcbiAgICB0aGlzLnJlU2V0VmFyaWFibGUoKTtcclxuICAgIHRoaXMuc2V0Vmlld1dpZHRoKCk7XHJcblxyXG4gICAgLy8gw6XCm8Kgw6fCgsK6w6TCuMKNw6jCg8K9w6bCu8KRw6TCusKGw6/CvMKMw6bCicKAw6TCu8Klw6jCpsKBw6XCm8Kew6XCiMKww6fCrMKsw6TCuMKAw6XCgMKLw6/CvMKMw6TCu8Klw6fCosK6w6TCv8Kdw6XChcKow6nCg8Kow6nCg8K9w6bCnMKJw6nCocKvw6fCpMK6XHJcbiAgICBpZiAodGhpcy5zaG93TnVtID49IHRoaXMuaXRlbXNFbG0ubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gMDtcclxuICAgIH1cclxuICAgIHRoaXMuZHJhd1ZpZXcodGhpcy5jdXJyZW50SW5kZXgsIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gICAgaWYgKHRoaXMuYnRuTmV4dCAmJiB0aGlzLmJ0blByZXYpIHtcclxuICAgICAgdGhpcy5uZXh0TGlzdGVuZXIoKTtcclxuICAgICAgdGhpcy5wcmV2TGlzdGVuZXIoKTtcclxuICAgIH1cclxuICAgIHRoaXMuaGFtbWVyLmRlc3Ryb3koKTtcclxuICAgIGlmICh0aGlzLmF1dG9wbGF5KSB7XHJcbiAgICAgIHRoaXMuZG9OZXh0U3ViJC51bnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZWxtU3ViJC51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5kZXgoaSkge1xyXG4gICAgdGhpcy5jdXJyZW50SW5kZXggPSBpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbml0VmFyaWFibGUoKSB7XHJcbiAgICB0aGlzLnJvb3RFbG0gPSB0aGlzLnBhcmVudENoaWxkLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICB0aGlzLmNvbnRhaW5lckVsbSA9IHRoaXMucm9vdEVsbS5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudDtcclxuICAgIHRoaXMuaXRlbXNFbG0gPSBBcnJheS5mcm9tKHRoaXMuY29udGFpbmVyRWxtLmNoaWxkcmVuKSBhcyBIVE1MRWxlbWVudFtdO1xyXG4gICAgdGhpcy5sYXN0SW5kZXggPSB0aGlzLml0ZW1zRWxtLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgaWYgKHRoaXMuZG90RWxtKSB7XHJcbiAgICAgIHRoaXMuZG90cyA9IG5ldyBBcnJheSh0aGlzLml0ZW1zRWxtLmxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHN0YXJ0RXZlbnQgPSB0aGlzLnJlc3RhcnQuYXNPYnNlcnZhYmxlKCk7XHJcbiAgICBsZXQgc3RvcEV2ZW50ID0gdGhpcy5zdG9wRXZlbnQuYXNPYnNlcnZhYmxlKCk7XHJcbiAgICBpZiAodGhpcy5tb3Vyc2VFbmFibGUpIHtcclxuICAgICAgc3RhcnRFdmVudCA9IG1lcmdlKFxyXG4gICAgICAgIHN0YXJ0RXZlbnQsXHJcbiAgICAgICAgZnJvbUV2ZW50KHRoaXMuY29udGFpbmVyRWxtLCAnbW91c2VsZWF2ZScpLnBpcGUoXHJcbiAgICAgICAgICB0YXAoKCkgPT4gdGhpcy5tb3VzZU9uQ29udGFpbmVyID0gZmFsc2UpXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgICBzdG9wRXZlbnQgPSBtZXJnZShcclxuICAgICAgICBzdG9wRXZlbnQsXHJcbiAgICAgICAgZnJvbUV2ZW50KHRoaXMuY29udGFpbmVyRWxtLCAnbW91c2VvdmVyJykucGlwZShcclxuICAgICAgICAgIHRhcCgoKSA9PiB0aGlzLm1vdXNlT25Db250YWluZXIgPSB0cnVlKVxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmRvTmV4dCA9IHN0YXJ0RXZlbnQucGlwZShcclxuICAgICAgZGVib3VuY2VUaW1lKHRoaXMuZGVsYXkpLFxyXG4gICAgICBzd2l0Y2hNYXAoKCkgPT5cclxuICAgICAgICB0aGlzLnJ1blByb2dyZXNzKDIwKS5waXBlKFxyXG4gICAgICAgICAgdGFwKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pc0Zyb21BdXRvID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ25leHQnKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCAtPSB0aGlzLnNjcm9sbE51bTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCArPSB0aGlzLnNjcm9sbE51bTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSksXHJcbiAgICAgICAgICB0YWtlVW50aWwoc3RvcEV2ZW50LnBpcGUodGFwKCgpID0+IHRoaXMucHJvZ3Jlc3NXaWR0aCA9IDApKVxyXG4gICAgICAgICAgKVxyXG4gICAgICAgIClcclxuICAgICAgKSk7XHJcblxyXG4gICAgaWYgKHRoaXMuYXV0b3BsYXkpIHtcclxuICAgICAgdGhpcy5kb05leHRTdWIkID0gdGhpcy5kb05leHQuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlU2V0VmFyaWFibGUoKSB7XHJcbiAgICB0aGlzLmNvbnRhaW5lcl9sZWZ0ID0gdGhpcy5yb290RWxtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XHJcbiAgICBpZiAodGhpcy5zaG93TnVtICYmIHRoaXMuc2hvd051bSAhPT0gMSkge1xyXG4gICAgICBzd2l0Y2ggKHRoaXMuYWxpZ24pIHtcclxuICAgICAgICBjYXNlICdjZW50ZXInOlxyXG4gICAgICAgICAgdGhpcy5hbGlnbkRpc3RhbmNlID0gKHRoaXMucm9vdEVsbS5jbGllbnRXaWR0aCAtIHRoaXMuZWxtV2lkdGgpIC8gMjtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgICAgdGhpcy5hbGlnbkRpc3RhbmNlID0gMDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3JpZ2h0JzpcclxuICAgICAgICAgIHRoaXMuYWxpZ25EaXN0YW5jZSA9IHRoaXMucm9vdEVsbS5jbGllbnRXaWR0aCAtIHRoaXMuZWxtV2lkdGg7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5hbGlnbkRpc3RhbmNlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0Vmlld1dpZHRoKGlzSW5pdD86IGJvb2xlYW4pIHtcclxuICAgIGlmICh0aGlzLmlzQXV0b051bSkge1xyXG4gICAgICB0aGlzLl9zaG93TnVtID0gdGhpcy5nZXRBdXRvTnVtKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmNvbnRhaW5lckVsbSwgJ2dyYWInKTtcclxuICAgIC8vIHdoZW4gaW5pdCBjaGVjayB2aWV3IGhhcyBzY3JvbGwgYmFyXHJcbiAgICBjb25zdCB0b3RhbFdpZHRoID0gMDtcclxuICAgIGlmIChpc0luaXQpIHtcclxuICAgICAgLy8gcmVtYWluIG9uZSBlbG0gaGVpZ2h0XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyLmFkZENsYXNzKHRoaXMuY29udGFpbmVyRWxtLCAnbmd4LWhtLWNhcm91c2VsLWRpc3BsYXktbnB3cmFwJyk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmVsbVdpZHRoID0gKHRvdGFsV2lkdGggKyB0aGlzLnJvb3RFbG0uY2xpZW50V2lkdGgpIC8gdGhpcy5fc2hvd051bTtcclxuXHJcbiAgICB0aGlzLl9yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmNvbnRhaW5lckVsbSwgJ25neC1obS1jYXJvdXNlbC1kaXNwbGF5LW5wd3JhcCcpO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICd3aWR0aCcsIGAke3RoaXMuZWxtV2lkdGggKiB0aGlzLml0ZW1zRWxtLmxlbmd0aH1weGApO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICdwb3NpdGlvbicsICdyZWxhdGl2ZScpO1xyXG4gICAgdGhpcy5pdGVtc0VsbS5mb3JFYWNoKChlbG06IEhUTUxFbGVtZW50LCBpbmRleCkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlci5zZXRTdHlsZShlbG0sICd3aWR0aCcsIGAke3RoaXMuZWxtV2lkdGh9cHhgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICh0aGlzLmZpcnN0RWxtX2Nsb25lKSB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKHRoaXMuZmlyc3RFbG1fY2xvbmUsICd3aWR0aCcsIGAke3RoaXMuZWxtV2lkdGh9cHhgKTtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5MYXRlc3RFbG1fY2xvbmUsICd3aWR0aCcsIGAke3RoaXMuZWxtV2lkdGh9cHhgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYmluZEhhbW1lcigpIHtcclxuICAgIGNvbnN0IGhtID0gbmV3IEhhbW1lcih0aGlzLmNvbnRhaW5lckVsbSk7XHJcbiAgICBobS5nZXQoJ3BhbicpLnNldCh7IGRpcmVjdGlvbjogSGFtbWVyLkRJUkVDVElPTl9IT1JJWk9OVEFMIH0pO1xyXG5cclxuICAgIGhtLm9uKCdwYW5sZWZ0IHBhbnJpZ2h0IHBhbmVuZCB0YXAnLCAoZTogSGFtbWVySW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5jb250YWluZXJFbG0sICd0cmFuc2l0aW9uJyk7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyLmFkZENsYXNzKHRoaXMuY29udGFpbmVyRWxtLCAnZ3JhYmJpbmcnKTtcclxuICAgICAgaWYgKHRoaXMuYXV0b3BsYXkpIHtcclxuICAgICAgICB0aGlzLnN0b3BFdmVudC5uZXh0KCk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gY29uc29sZS5sb2coZS50eXBlKTtcclxuICAgICAgc3dpdGNoIChlLnR5cGUpIHtcclxuICAgICAgICBjYXNlICd0YXAnOlxyXG4gICAgICAgICAgdGhpcy5jYWxsQ2xpY2soZS5jZW50ZXIueCk7XHJcbiAgICAgICAgICB0aGlzLmNhbGxSZXN0YXJ0KCk7XHJcbiAgICAgICAgICB0aGlzLl9yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmNvbnRhaW5lckVsbSwgJ2dyYWJiaW5nJyk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdwYW5sZWZ0JzpcclxuICAgICAgICBjYXNlICdwYW5yaWdodCc6XHJcblxyXG4gICAgICAgICAgLy8gw6nCocKvw6fCpMK6w6fCuMK9w6bClcK4w6nCh8KPw6XCsMKPw6bClsK8w6fCuMK9w6bClcK4w6nCh8KPw6/CvMKMw6XCgcKcw6bCrcKiw6bCu8KRw6XCi8KVXHJcbiAgICAgICAgICBpZiAodGhpcy5zaG93TnVtID49IHRoaXMuaXRlbXNFbG0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFtbWVyLnN0b3AodHJ1ZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUuZGVsdGFZKTtcclxuICAgICAgICAgIHRoaXMucHJlUGFuTW92ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgaWYgKE1hdGguYWJzKGUuZGVsdGFZKSA+IDUwKSB7IHJldHVybjsgfVxyXG4gICAgICAgICAgLy8gU2xvdyBkb3duIGF0IHRoZSBmaXJzdCBhbmQgbGFzdCBwYW5lLlxyXG4gICAgICAgICAgaWYgKCEodGhpcy5hdXRvcGxheSB8fCB0aGlzLmluZmluaXRlKSAmJiB0aGlzLm91dE9mQm91bmQoZS50eXBlKSkge1xyXG4gICAgICAgICAgICBlLmRlbHRhWCAqPSAwLjI7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICdsZWZ0JywgYCR7LXRoaXMuY3VycmVudEluZGV4ICogdGhpcy5lbG1XaWR0aCArIHRoaXMuYWxpZ25EaXN0YW5jZSArIGUuZGVsdGFYfXB4YCk7XHJcblxyXG4gICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ01hbnkpIHtcclxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGUuZGVsdGFYKSA+IHRoaXMuZWxtV2lkdGggKiAwLjUpIHtcclxuICAgICAgICAgICAgICBpZiAoZS5kZWx0YVggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCAtPSB0aGlzLnNjcm9sbE51bTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggKz0gdGhpcy5zY3JvbGxOdW07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuY29udGFpbmVyRWxtLCAnZ3JhYmJpbmcnKTtcclxuICAgICAgICAgICAgICB0aGlzLmNhbGxSZXN0YXJ0KCk7XHJcbiAgICAgICAgICAgICAgdGhpcy5oYW1tZXIuc3RvcCh0cnVlKTtcclxuICAgICAgICAgICAgICAvLyByZW1lbWJlciBwcnYgYWN0aW9uLCB0byBhdm9pZCBoYW1tZXIgc3RvcCwgdGhlbiBjbGlja1xyXG4gICAgICAgICAgICAgIHRoaXMucHJlUGFuTW92ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3BhbmVuZCc6XHJcbiAgICAgICAgICB0aGlzLmNhbGxSZXN0YXJ0KCk7XHJcblxyXG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5jb250YWluZXJFbG0sICdncmFiYmluZycpO1xyXG4gICAgICAgICAgaWYgKE1hdGguYWJzKGUuZGVsdGFYKSA+IHRoaXMuZWxtV2lkdGggKiBQQU5CT1VOREFSWSkge1xyXG4gICAgICAgICAgICBjb25zdCBtb3ZlTnVtID0gdGhpcy5pc0RyYWdNYW55ID9cclxuICAgICAgICAgICAgICBNYXRoLmNlaWwoTWF0aC5hYnMoZS5kZWx0YVgpIC8gdGhpcy5lbG1XaWR0aCkgOiB0aGlzLnNjcm9sbE51bTtcclxuXHJcbiAgICAgICAgICAgIGxldCBwcmV2SW5kZXggPSB0aGlzLmN1cnJlbnRJbmRleCAtIG1vdmVOdW07XHJcbiAgICAgICAgICAgIGxldCBuZXh0SW5kZXggPSB0aGlzLmN1cnJlbnRJbmRleCArIG1vdmVOdW07XHJcblxyXG4gICAgICAgICAgICAvLyDDpcKmwoLDpsKewpzDpMK4wo3DpsKYwq/Dp8KEwqHDqcKZwpDDpcK+wqrDp8KSwrDDr8K8wozDpMK4wo3DqMKDwr3DpcKkwqfDpsKWwrzDpsKIwpbDpcKwwo/DpsKWwrxcclxuXHJcbiAgICAgICAgICAgIGlmIChlLmRlbHRhWCA+IDApIHtcclxuICAgICAgICAgICAgICBpZiAoISh0aGlzLmF1dG9wbGF5IHx8IHRoaXMuaW5maW5pdGUpICYmIHByZXZJbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgIHByZXZJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdWaWV3KDApO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBwcmV2SW5kZXg7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEodGhpcy5hdXRvcGxheSB8fCB0aGlzLmluZmluaXRlKSAmJiBuZXh0SW5kZXggPiB0aGlzLmxhc3RJbmRleCAtIHRoaXMuX3Nob3dOdW0gKyAxKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0SW5kZXggPSB0aGlzLmxhc3RJbmRleCAtIHRoaXMuX3Nob3dOdW0gKyAxO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3VmlldyhuZXh0SW5kZXgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IG5leHRJbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0RyYWdNYW55ICYmIHRoaXMucHJlUGFuTW92ZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMuY2FsbENsaWNrKGUuY2VudGVyLngpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRJbmRleCk7XHJcbiAgICAgICAgICB0aGlzLmRyYXdWaWV3KHRoaXMuY3VycmVudEluZGV4KTtcclxuICAgICAgICAgIHRoaXMucHJlUGFuTW92ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBobTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYmluZENsaWNrKCkge1xyXG4gICAgaWYgKHRoaXMuYnRuTmV4dCAmJiB0aGlzLmJ0blByZXYpIHtcclxuICAgICAgdGhpcy5uZXh0TGlzdGVuZXIgPSB0aGlzLl9yZW5kZXJlci5saXN0ZW4odGhpcy5idG5OZXh0Lm5hdGl2ZUVsZW1lbnQsICdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCsrO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5wcmV2TGlzdGVuZXIgPSB0aGlzLl9yZW5kZXJlci5saXN0ZW4odGhpcy5idG5QcmV2Lm5hdGl2ZUVsZW1lbnQsICdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleC0tO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2FsbFJlc3RhcnQoKSB7XHJcbiAgICBpZiAodGhpcy5hdXRvcGxheSAmJiAhdGhpcy5tb3VzZU9uQ29udGFpbmVyKSB7XHJcbiAgICAgIHRoaXMucmVzdGFydC5uZXh0KG51bGwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjYWxsQ2xpY2socG9zaXRpb25YKSB7XHJcbiAgICAvLyBjbGljayBwb3NpdGlvbiBzdWJ0cmFjdCB0aGUgY29udGFpbmVybGVmIGFuZCBhbGlnbkRpc3RhbmNlIGlzIHRoZSBtb3ZlIGRpc3RhbmNlXHJcbiAgICBjb25zdCB0b0luZGV4ID0gdGhpcy5jdXJyZW50SW5kZXggKyBNYXRoLmZsb29yKChwb3NpdGlvblggLSB0aGlzLmNvbnRhaW5lcl9sZWZ0IC0gdGhpcy5hbGlnbkRpc3RhbmNlKSAvIHRoaXMuZWxtV2lkdGgpO1xyXG5cclxuICAgIGNvbnN0IGVsbSA9IHRoaXMuaXRlbXMudG9BcnJheSgpW3RvSW5kZXhdO1xyXG4gICAgaWYgKGVsbSkge1xyXG4gICAgICBlbG0uY2xpY2tFdmVudC5lbWl0KHRvSW5kZXgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkcmF3VmlldyhpbmRleDogbnVtYmVyLCBpc0VtaXQgPSB0cnVlKSB7XHJcbiAgICBjb25zdCBsYXN0SW5kZXggPSB0aGlzLmxhc3RJbmRleDtcclxuXHJcbiAgICBpZiAodGhpcy5hdXRvcGxheSB8fCB0aGlzLmluZmluaXRlKSB7XHJcbiAgICAgIGlmIChpbmRleCA8IDApIHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50SW5kZXggPSBsYXN0SW5kZXg7XHJcbiAgICAgIH0gZWxzZSBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50SW5kZXggPSAwO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jdXJyZW50SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihpbmRleCwgdGhpcy5sYXN0SW5kZXgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDDpcKPwqrDpsKcwonDp8KVwrbDpcKkwqfDpsKWwrwxw6bCicKNw6jCpsKBw6fCp8K7w6XCi8KVXHJcbiAgICBpZiAodGhpcy5pdGVtc0VsbS5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGNvbnN0IGxlZnREaXN0YW5jZSA9IChpbmRleCAqIHRoaXMuZWxtV2lkdGgpIC0gdGhpcy5hbGlnbkRpc3RhbmNlO1xyXG5cclxuICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICdsZWZ0JywgYCR7LWxlZnREaXN0YW5jZX1weGApO1xyXG4gICAgICBpZiAoaXNFbWl0KSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5jb250YWluZXJFbG0sICd0cmFuc2l0aW9uJyk7XHJcbiAgICAgICAgdGhpcy5pbmRleENoYW5nZWQuZW1pdCh0aGlzLmN1cnJlbnRJbmRleCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5jb250YWluZXJFbG0sICd0cmFuc2l0aW9uJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIMOlwqbCgsOmwp7CnMOmwpjCr8Olwr7CqsOnwpLCsMOnwprChMOvwrzCjMOnwpXCtsOlwovClcOnwpXCq8OnwrXCkMOmwp3Cn8OlwoHCt8OlwoHCt8OnwprChMOowrfCs8OlwojCsMOnwpXCtsOlwonCjcOnwprChGluZGV4w6PCgMKBbGVmdMOlwo7Cu1xyXG4gICAgICB0aGlzLkluZmluaXRlSGFuZGxlcihpbmRleCwgbGFzdEluZGV4KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyLnNldFN0eWxlKHRoaXMuY29udGFpbmVyRWxtLCAnbGVmdCcsIGAke3RoaXMuYWxpZ25EaXN0YW5jZX1weGApO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIHByaXZhdGUgSW5maW5pdGVIYW5kbGVyKGluZGV4OiBudW1iZXIsIGxhc3RJbmRleDogbnVtYmVyKSB7XHJcbiAgICBpZiAoKHRoaXMuYXV0b3BsYXkgfHwgdGhpcy5pbmZpbml0ZSkpIHtcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy5jb250YWluZXJFbG0sICd0cmFuc2l0aW9uJyk7XHJcbiAgICAgICAgLy8gw6XCpsKCw6bCnsKcw6bCmMKvw6XCvsKqw6fCksKww6fCmsKEw6/CvMKMw6fClcK2w6XCi8KVw6fClcKrw6fCtcKQw6bCncKfw6XCgcK3w6XCgcK3w6fCmsKEw6jCt8Kzw6XCiMKww6fClcK2w6XCicKNw6fCmsKEaW5kZXjDo8KAwoFsZWZ0w6XCjsK7XHJcbiAgICAgICAgbGV0IGRpc3RhbmNlID0gMDtcclxuICAgICAgICBpZiAoaW5kZXggPD0gLTEpIHtcclxuICAgICAgICAgIGRpc3RhbmNlID0gKGxhc3RJbmRleCAqIHRoaXMuZWxtV2lkdGgpIC0gdGhpcy5hbGlnbkRpc3RhbmNlO1xyXG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICdsZWZ0JywgYCR7LWRpc3RhbmNlfXB4YCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xyXG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUodGhpcy5jb250YWluZXJFbG0sICdsZWZ0JywgYDBweGApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSwgdGhpcy5hbmlUaW1lKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgb3V0T2ZCb3VuZCh0eXBlKSB7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgY2FzZSAncGFubGVmdCc6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEluZGV4ID49IHRoaXMubGFzdEluZGV4IC0gdGhpcy5fc2hvd051bSArIDE7XHJcbiAgICAgIGNhc2UgJ3BhbnJpZ2h0JzpcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50SW5kZXggPD0gMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgcnVuUHJvZ3Jlc3MoYmV0d2VlblRpbWUpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgaG93VGltZXMgPSB0aGlzLnNwZWVkIC8gYmV0d2VlblRpbWU7XHJcbiAgICBjb25zdCBldmVyeUluY3JlYXNlID0gMTAwIC8gdGhpcy5zcGVlZCAqIGJldHdlZW5UaW1lO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ3Byb2dyZXNzJyk7XHJcbiAgICByZXR1cm4gaW50ZXJ2YWwoYmV0d2VlblRpbWUpLnBpcGUoXHJcbiAgICAgIHRhcCh0ID0+IHtcclxuICAgICAgICB0aGlzLnByb2dyZXNzV2lkdGggPSAodCAlIGhvd1RpbWVzKSAqIGV2ZXJ5SW5jcmVhc2U7XHJcbiAgICAgIH0pLFxyXG4gICAgICBidWZmZXJDb3VudChNYXRoLnJvdW5kKHRoaXMuc3BlZWQgLyBiZXR3ZWVuVGltZSksIDApXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRBdXRvTnVtKCkge1xyXG4gICAgY29uc3QgaW5pdE51bSA9IDM7XHJcbiAgICAvLyA2MTBcclxuICAgIGNvbnN0IHdpZHRoID0gdGhpcy5yb290RWxtLmNsaWVudFdpZHRoO1xyXG4gICAgaWYgKHdpZHRoID4gMzAwKSB7XHJcbiAgICAgIHJldHVybiBNYXRoLmZsb29yKGluaXROdW0gKyAod2lkdGggLyAyMDApKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbml0TnVtO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTdHlsZShlbG06IEhUTUxFbGVtZW50LCBzdHlsZTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfSkge1xyXG4gICAgaWYgKHN0eWxlKSB7XHJcbiAgICAgIE9iamVjdC5rZXlzKHN0eWxlKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHN0eWxlW2tleV07XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIuc2V0U3R5bGUoZWxtLCBrZXksIHZhbHVlKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuXHJcbmltcG9ydCB7IE5neEhtQ2Fyb3VzZWxEeW5hbWljRGlyZWN0aXZlIH0gZnJvbSAnLi9uZ3gtaG0tY2Fyb3VzZWwtZHluYW1pYy5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBOZ3hIbUNhcm91c2VsSXRlbURpcmVjdGl2ZSB9IGZyb20gJy4vbmd4LWhtLWNhcm91c2VsLWl0ZW0uZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgTmd4SG1DYXJvdXNlbENvbXBvbmVudCB9IGZyb20gJy4vbmd4LWhtLWNhcm91c2VsLmNvbXBvbmVudCc7XHJcblxyXG5cclxuQE5nTW9kdWxlKHtcclxuICBpbXBvcnRzOiBbXHJcbiAgICBDb21tb25Nb2R1bGUsXHJcbiAgICBGb3Jtc01vZHVsZSxcclxuICBdLFxyXG4gIGRlY2xhcmF0aW9uczogW1xyXG4gICAgTmd4SG1DYXJvdXNlbENvbXBvbmVudCxcclxuICAgIE5neEhtQ2Fyb3VzZWxJdGVtRGlyZWN0aXZlLFxyXG4gICAgTmd4SG1DYXJvdXNlbER5bmFtaWNEaXJlY3RpdmVcclxuICBdLFxyXG4gIGV4cG9ydHM6IFtcclxuICAgIE5neEhtQ2Fyb3VzZWxDb21wb25lbnQsXHJcbiAgICBOZ3hIbUNhcm91c2VsSXRlbURpcmVjdGl2ZSxcclxuICAgIE5neEhtQ2Fyb3VzZWxEeW5hbWljRGlyZWN0aXZlXHJcbiAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgTmd4SG1DYXJvdXNlbE1vZHVsZSB7IH1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7Ozs7O0lBOEJFLFlBQ1UsT0FDQTtRQURBLFVBQUssR0FBTCxLQUFLO1FBQ0wsY0FBUyxHQUFULFNBQVM7eUJBSEMsS0FBSztRQUl2QixJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO0tBQ3BCOzs7OztRQXZCRyxRQUFRLENBQUMsS0FBYTtRQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUVuQix1QkFBTSxLQUFLLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQztZQUN4Qix1QkFBTSxLQUFLLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQztZQUV4QixJQUNFLElBQUksQ0FBQyxLQUFLLEtBQUssQ0FBQztnQkFDaEIsSUFBSSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUM7Z0JBQzlCLElBQUksQ0FBQyxLQUFLLEtBQUssS0FBSztnQkFDcEIsSUFBSSxDQUFDLEtBQUssS0FBSyxLQUFLO2dCQUNwQixJ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